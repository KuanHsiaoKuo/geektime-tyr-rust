# I. 从栈堆、所有权、生命周期开始内存管理

<!--ts-->

* [I. 从栈堆、所有权、生命周期开始内存管理](#i-从栈堆所有权生命周期开始内存管理)
* [内存](#内存)
    * [字符串内存使用图](#字符串内存使用图)
    * [栈](#栈)
        * [栈帧示意图](#栈帧示意图)
        * [考虑栈溢出](#考虑栈溢出)
    * [堆](#堆)
        * [使用堆引用共享数据](#使用堆引用共享数据)
        * [考虑堆溢出](#考虑堆溢出)
* [编程四大类基本概念](#编程四大类基本概念)
    * [1. 数据](#1-数据)
        * [值和类型](#值和类型)
        * [指针和引用](#指针和引用)
    * [2. 代码](#2-代码)
        * [函数 -&gt; 方法 -&gt; 闭包](#函数---方法---闭包)
            * [闭包示意图](#闭包示意图)
        * [接口与虚表](#接口与虚表)
    * [3. 运行方式](#3-运行方式)
        * [并发与并行](#并发与并行)
        * [同步和异步](#同步和异步)
    * [4. 编程范式](#4-编程范式)
        * [泛型编程](#泛型编程)
        * [函数式编程](#函数式编程)
        * [面向对象编程](#面向对象编程)
* [Rust内存管理概览](#rust内存管理概览)
    * [一、所有权: 单一/共享](#一所有权-单一共享)
    * [单一所有权：掌控生杀大权](#单一所有权掌控生杀大权)
        * [从多引用开始](#从多引用开始)
        * [Rust如何解决](#rust如何解决)
            * [方案一、单一所有权](#方案一单一所有权)
            * [方案二、Copy](#方案二copy)
        * [单一所有权规则整理](#单一所有权规则整理)
        * [单一所有权借用](#单一所有权借用)
            * [两种传参方式：传值/传址](#两种传参方式传值传址)
            * [只读借用/引用](#只读借用引用)
            * [借用的生命周期与约束](#借用的生命周期与约束)
            * [可变借用/引用](#可变借用引用)
            * [第一性原理理解单一所有权规则](#第一性原理理解单一所有权规则)
    * [共享内存-多个所有者：引用计数](#共享内存-多个所有者引用计数)
        * [Rc使用说明: 只读引用计数](#rc使用说明-只读引用计数)
            * [Rc使用Box::leak()](#rc使用boxleak)
            * [使用Rc实现DAG](#使用rc实现dag)
        * [RefCell: 提供内部可变性，可变引用计数](#refcell-提供内部可变性可变引用计数)
            * [外部可变性与内部可变性](#外部可变性与内部可变性)
            * [RefCell简单使用](#refcell简单使用)
            * [使用RefCell实现可修改版本DAG](#使用refcell实现可修改版本dag)
        * [线程安全版本计数器：Arc(Rc)、Mutex/RwLock(RefCell)](#线程安全版本计数器arcrcmutexrwlockrefcell)
    * [二、生命周期](#二生命周期)
        * [动态还是静态？](#动态还是静态)
        * [如何识别生命周期](#如何识别生命周期)
            * [两个小例子](#两个小例子)
            * [需要生命周期标注的情况](#需要生命周期标注的情况)
            * [编译器其实会自动进行生命周期标注](#编译器其实会自动进行生命周期标注)
            * [生命周期标注练习](#生命周期标注练习)
            * [生命周期标注的目的](#生命周期标注的目的)
    * [三、融会贯通，从创建到消亡](#三融会贯通从创建到消亡)
    * [创建](#创建)
        * [堆内存生命周期管理发展史](#堆内存生命周期管理发展史)
        * [struct/enum/vec/String创建时的内存布局](#structenumvecstring创建时的内存布局)
            * [struct](#struct)
            * [enum](#enum)
            * [vec和String](#vec和string)
            * [引用类型的内存布局](#引用类型的内存布局)
        * [更多可见cheats.rs](#更多可见cheatsrs)
    * [使用](#使用)
        * [copy和move](#copy和move)
    * [销毁](#销毁)
        * [drop释放堆内存](#drop释放堆内存)
        * [RAII释放其他资源](#raii释放其他资源)
        * [Rust在编译时、运行时检查调用drop](#rust在编译时运行时检查调用drop)

<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Sun Oct  9 02:33:18 UTC 2022 -->

<!--te-->

