<!DOCTYPE HTML>
<html lang="cn" class="sidebar-visible no-js navy">
<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>ç½‘ç»œæ¨¡å‹ - Anatomy In First Rust Programming Class ğŸ¦€</title>


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="ä»¥rustç¼–ç¨‹ç¬¬ä¸€è¯¾çš„ä»£ç ä¸ºä¾‹è¿›è¡ŒåŸºç¡€ä»£ç åˆ†æ">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff"/>

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="md-favicon.png">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="highlight.css">
    <link rel="stylesheet" href="tomorrow-night.css">
    <link rel="stylesheet" href="ayu-highlight.css">

    <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="assets/pagetoc/pagetoc_style.css">
        <link rel="stylesheet" href="assets/css/mdbook-admonish.css">

        <!-- MathJax -->
        <script async type="text/javascript"
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<!-- Provide site root to javascript -->
<script type="text/javascript">
    var path_to_root = "";
    var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
</script>

<!-- Work around some values being stored in localStorage wrapped in quotes -->
<script type="text/javascript">
    try {
        var theme = localStorage.getItem('mdbook-theme');
        var sidebar = localStorage.getItem('mdbook-sidebar');

        if (theme.startsWith('"') && theme.endsWith('"')) {
            localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
        }

        if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
            localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
        }
    } catch (e) {
    }
</script>

<!-- Set the theme before any content is loaded, prevents flash -->
<script type="text/javascript">
    var theme;
    try {
        theme = localStorage.getItem('mdbook-theme');
    } catch (e) {
    }
    if (theme === null || theme === undefined) {
        theme = default_theme;
    }
    var html = document.querySelector('html');
    html.classList.remove('no-js')
    html.classList.remove('navy')
    html.classList.add(theme);
    html.classList.add('js');
</script>

<!-- Hide / unhide sidebar before it is displayed -->
<script type="text/javascript">
    var html = document.querySelector('html');
    var sidebar = 'hidden';
    if (document.body.clientWidth >= 1080) {
        try {
            sidebar = localStorage.getItem('mdbook-sidebar');
        } catch (e) {
        }
        sidebar = sidebar || 'visible';
    }
    html.classList.remove('sidebar-visible');
    html.classList.add("sidebar-" + sidebar);
</script>

<nav id="sidebar" class="sidebar" aria-label="Table of contents">
    <div class="sidebar-scrollbox">
        <ol class="chapter"><li class="chapter-item expanded "><a href="anatomy_logic.html"><strong aria-hidden="true">1.</strong> æºç é˜…è¯»é€»è¾‘</a></li><li class="chapter-item expanded "><a href="intro_gdb_lldb.html"><strong aria-hidden="true">2.</strong> gdb/lldbè°ƒè¯•æˆ–æŸ¥çœ‹å†…å­˜ç»“æ„</a></li><li class="chapter-item expanded "><a href="get_hands_dirty.html"><strong aria-hidden="true">3.</strong> get hands dirty</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="httpie.html"><strong aria-hidden="true">3.1.</strong> httpie</a></li><li class="chapter-item expanded "><a href="rgrep.html"><strong aria-hidden="true">3.2.</strong> rgrep</a></li><li class="chapter-item expanded "><a href="thumbor.html"><strong aria-hidden="true">3.3.</strong> thumbor</a></li><li class="chapter-item expanded "><a href="queryer.html"><strong aria-hidden="true">3.4.</strong> queryer</a></li></ol></li><li class="chapter-item expanded "><a href="rust_cores.html"><strong aria-hidden="true">4.</strong> Rustæ ¸å¿ƒæ·±å…¥</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1_stack_heap_ownership_lifetime_memory.html"><strong aria-hidden="true">4.1.</strong> I. ä»æ ˆå †ã€æ‰€æœ‰æƒã€ç”Ÿå‘½å‘¨æœŸå¼€å§‹å†…å­˜ç®¡ç†</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1_1_stack_heap.html"><strong aria-hidden="true">4.1.1.</strong> ä»å †æ ˆå¼€å§‹</a></li><li class="chapter-item expanded "><a href="1_2_programming_basic_concepts.html"><strong aria-hidden="true">4.1.2.</strong> å››å¤§ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ</a></li><li class="chapter-item expanded "><a href="1_3_ownership.html"><strong aria-hidden="true">4.1.3.</strong> æ‰€æœ‰æƒ</a></li><li class="chapter-item expanded "><a href="1_4_lifetime.html"><strong aria-hidden="true">4.1.4.</strong> ç”Ÿå‘½å‘¨æœŸ</a></li><li class="chapter-item expanded "><a href="1_5_go_through.html"><strong aria-hidden="true">4.1.5.</strong> ä»åˆ›å»ºåˆ°æ¶ˆäº¡</a></li></ol></li><li class="chapter-item expanded "><a href="2_type_system.html"><strong aria-hidden="true">4.2.</strong> II. ç±»å‹ç³»ç»Ÿ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="2_1_type_details.html"><strong aria-hidden="true">4.2.1.</strong> ç±»å‹ç³»ç»Ÿç‰¹ç‚¹</a></li><li class="chapter-item expanded "><a href="2_2_generic_overview.html"><strong aria-hidden="true">4.2.2.</strong> æ³›å‹æ¦‚è§ˆï¼šå°±åƒå‡½æ•°</a></li><li class="chapter-item expanded "><a href="2_3_trait_overview.html"><strong aria-hidden="true">4.2.3.</strong> traitæ¦‚è§ˆ</a></li><li class="chapter-item expanded "><a href="2_4_0_three_polymorphics.html"><strong aria-hidden="true">4.2.4.</strong> ä¸‰ç§å¤šæ€å½¢å¼</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="2_4_1_generic_usage.html"><strong aria-hidden="true">4.2.4.1.</strong> Generics: &lt;&gt;</a></li><li class="chapter-item "><a href="2_4_2_trait_impl.html"><strong aria-hidden="true">4.2.4.2.</strong> Trait impl/bound: self</a></li><li class="chapter-item "><a href="2_4_3_trait_object.html"><strong aria-hidden="true">4.2.4.3.</strong> Trait object: &self</a></li><li class="chapter-item "><a href="2_4_4_comprehensive_polymorphics.html"><strong aria-hidden="true">4.2.4.4.</strong> å¤æ‚å¤šæ€ç»¼åˆä½¿ç”¨å®ä¾‹</a></li></ol></li><li class="chapter-item expanded "><a href="2_5_trait_frequently.html"><strong aria-hidden="true">4.2.5.</strong> å¸¸ç”¨trait</a></li><li class="chapter-item expanded "><a href="2_6_trait_design.html"><strong aria-hidden="true">4.2.6.</strong> Traitè®¾è®¡</a></li></ol></li><li class="chapter-item expanded "><a href="3_data_structure.html"><strong aria-hidden="true">4.3.</strong> III. æ•°æ®ç»“æ„</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="3_1_smart_pointer.html"><strong aria-hidden="true">4.3.1.</strong> æ™ºèƒ½æŒ‡é’ˆ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="3_1_1_box.html"><strong aria-hidden="true">4.3.1.1.</strong> Box</a></li><li class="chapter-item "><a href="3_1_2_cow.html"><strong aria-hidden="true">4.3.1.2.</strong> Cow&lt;'a, B&gt;</a></li><li class="chapter-item "><a href="3_1_3_mutex_guard.html"><strong aria-hidden="true">4.3.1.3.</strong> MutexGuard&lt;'_, T&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="3_2_containers.html"><strong aria-hidden="true">4.3.2.</strong> é›†åˆå®¹å™¨</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="3_2_1_slice.html"><strong aria-hidden="true">4.3.2.1.</strong> åˆ‡ç‰‡</a></li><li class="chapter-item "><a href="3_2_2_hashmap.html"><strong aria-hidden="true">4.3.2.2.</strong> å“ˆå¸Œè¡¨</a></li></ol></li><li class="chapter-item expanded "><a href="3_3_error_handling.html"><strong aria-hidden="true">4.3.3.</strong> é”™è¯¯å¤„ç†</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="3_3_1_error_content.html"><strong aria-hidden="true">4.3.3.1.</strong> é”™è¯¯å¤„ç†å†…å®¹å’Œä¸»æµæ–¹æ³•</a></li><li class="chapter-item "><a href="3_3_2_rust_error_handling.html"><strong aria-hidden="true">4.3.3.2.</strong> Rustå¦‚ä½•å¤„ç†é”™è¯¯: ?/unwrap/expect</a></li></ol></li><li class="chapter-item expanded "><a href="3_4_closure.html"><strong aria-hidden="true">4.3.4.</strong> é—­åŒ…</a></li></ol></li><li class="chapter-item expanded "><a href="4_macros.html"><strong aria-hidden="true">4.4.</strong> IV. å®ç¼–ç¨‹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="4_1_macros_classify.html"><strong aria-hidden="true">4.4.1.</strong> å®åˆ†ç±»</a></li><li class="chapter-item expanded "><a href="4_2_declarative_macros.html"><strong aria-hidden="true">4.4.2.</strong> å£°æ˜å®</a></li><li class="chapter-item expanded "><a href="4_3_procedural_macros.html"><strong aria-hidden="true">4.4.3.</strong> è¿‡ç¨‹å®</a></li></ol></li><li class="chapter-item expanded "><a href="5_concurrency_async.html"><strong aria-hidden="true">4.5.</strong> V. å¹¶å‘ä¸å¼‚æ­¥</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="5_1_concurrency_primitives.html"><strong aria-hidden="true">4.5.1.</strong> å¹¶å‘åŸè¯­(Concurrency Primitives)</a></li><li class="chapter-item expanded "><a href="5_2_future_async_await.html"><strong aria-hidden="true">4.5.2.</strong> å¼‚æ­¥ï¼šFuture/Async/Await</a></li><li class="chapter-item expanded "><a href="5_3_deepin_async_await.html"><strong aria-hidden="true">4.5.3.</strong> æ·±å…¥async/await</a></li></ol></li><li class="chapter-item expanded "><a href="6_unsafe_ffi.html"><strong aria-hidden="true">4.6.</strong> VI. æ··åˆç¼–ç¨‹</a></li><li class="chapter-item expanded "><a href="7_network.html"><strong aria-hidden="true">4.7.</strong> VII. ç½‘ç»œå¼€å‘</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="7_1_protocols.html"><strong aria-hidden="true">4.7.1.</strong> ç½‘ç»œåè®®</a></li><li class="chapter-item expanded "><a href="7_2_network_models.html" class="active"><strong aria-hidden="true">4.7.2.</strong> ç½‘ç»œæ¨¡å‹</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="kv_server_design.html"><strong aria-hidden="true">5.</strong> kv serverè®¾è®¡ä¸å®ç°</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="kv1_basic.html"><strong aria-hidden="true">5.1.</strong> åŸºæœ¬æµç¨‹</a></li><li class="chapter-item expanded "><a href="kv2_protocols.html"><strong aria-hidden="true">5.2.</strong> å®ç°å¹¶éªŒè¯åè®®å±‚</a></li><li class="chapter-item expanded "><a href="kv3_advanced_traits.html"><strong aria-hidden="true">5.3.</strong> é«˜çº§traitæ”¹é€ </a></li><li class="chapter-item expanded "><a href="kv4_network.html"><strong aria-hidden="true">5.4.</strong> ç½‘ç»œå¤„ç†</a></li><li class="chapter-item expanded "><a href="kv5_network_security.html"><strong aria-hidden="true">5.5.</strong> ç½‘ç»œå®‰å…¨</a></li><li class="chapter-item expanded "><a href="kv6_async_refactor.html"><strong aria-hidden="true">5.6.</strong> å¼‚æ­¥æ”¹é€ </a></li><li class="chapter-item expanded "><a href="kv7_big_refactor.html"><strong aria-hidden="true">5.7.</strong> é‡å¤§é‡æ„</a></li><li class="chapter-item expanded "><a href="kv8_config_ci_cd.html"><strong aria-hidden="true">5.8.</strong> é…ç½®ã€æµ‹è¯•ã€ç›‘æ§ã€CI/CD</a></li></ol></li><li class="chapter-item expanded "><a href="custom_axum_async_web_framework.html"><strong aria-hidden="true">6.</strong> æ„å»ºè‡ªå·±çš„ç±»axumå¼‚æ­¥Webæ¡†æ¶</a></li><li class="chapter-item expanded affix "><a href="checklist.html">Checklist</a></li></ol>
    </div>
    <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
</nav>

<div id="page-wrapper" class="page-wrapper">

    <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
        <div id="menu-bar" class="menu-bar sticky bordered">
            <div class="left-buttons">
                <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                    <i class="fa fa-bars"></i>
                </button>
                <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                    <i class="fa fa-paint-brush"></i>
                </button>
                <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                    <li role="none">
                        <button role="menuitem" class="theme" id="light">Light</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="rust">Rust</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="coal">Coal</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="navy">Navy (default)</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="ayu">Ayu</button>
                    </li>
                </ul>
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                            aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                            aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
            </div>

            <h1 class="menu-title">Anatomy In First Rust Programming Class ğŸ¦€</h1>
            <h4 class="menu-bar">æ—¥ä¸è§å¢ æœˆæœ‰æ¸è¿› | å”¯å‰ƒçœŸæˆ‘ æ–¹æœ‰æˆæ•ˆï½œ æƒŠæ¶›æ‹æ¡ˆ åƒå±‚é›ªèµ· | <a href="https://kuanhsiaokuo.github.io/think-tool-kit/">ä¿æŒæ‰¹åˆ¤ï¼Œæœ‰æ‰€å–èˆï¼ŒçŸ¥è¡Œåˆä¸€, æ–¹è§çœŸæˆ‘</a> | ç»ƒæ­¦ä¸ç»ƒåŠŸ
                åˆ°å¤´ä¸€åœºç©º -- ã€Šèµ›åšè‹±é›„ä¼ ã€‹ </h4>
            <div class="right-buttons">
                    <a href="print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    <a href="https://github.com/KuanHsiaoKuo/geektime-tyr-rust.git" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-rust"></i>
                    </a>
            </div>
        </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" name="search" id="searchbar" name="searchbar"
                           placeholder="Search this book ..." aria-controls="searchresults-outer"
                           aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

        <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
        <script type="text/javascript">
            document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
            document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
            Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
            });
        </script>

        <div id="content" class="content">
            <main>

                <!-- Page table of contents -->
                <div class="sidetoc">
                    <nav class="pagetoc"></nav>
                </div>
                <h1 id="åŸºäºé€šè®¯æ¨¡å‹"><a class="header" href="#åŸºäºé€šè®¯æ¨¡å‹">åŸºäºé€šè®¯æ¨¡å‹</a></h1>
<!--ts-->
<ul>
<li><a href="#%E5%9F%BA%E4%BA%8E%E9%80%9A%E8%AE%AF%E6%A8%A1%E5%9E%8B">åŸºäºé€šè®¯æ¨¡å‹</a>
<ul>
<li><a href="#%E9%80%9A%E8%AE%AF%E6%A8%A1%E5%9E%8B">é€šè®¯æ¨¡å‹</a>
<ul>
<li><a href="#%E5%8F%8C%E5%90%91%E9%80%9A%E8%AE%AF">åŒå‘é€šè®¯</a></li>
<li><a href="#%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94">è¯·æ±‚å“åº”</a></li>
<li><a href="#%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2--%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2%E5%88%86%E7%A6%BB">æ§åˆ¶å¹³é¢ / æ•°æ®å¹³é¢åˆ†ç¦»</a></li>
<li><a href="#p2p-%E7%BD%91%E7%BB%9C">P2P ç½‘ç»œ</a></li>
</ul>
</li>
<li><a href="#%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA-p2p-%E7%BD%91%E7%BB%9C">å¦‚ä½•æ„å»º P2P ç½‘ç»œ</a>
<ul>
<li><a href="#%E8%A7%A3%E5%86%B3%E7%BD%91%E7%BB%9C%E8%BF%9E%E9%80%9A">è§£å†³ç½‘ç»œè¿é€š</a></li>
<li><a href="#%E6%89%BF%E8%BD%BD%E5%A4%9A%E4%B8%AA%E5%8D%8F%E8%AE%AE">æ‰¿è½½å¤šä¸ªåè®®</a></li>
<li><a href="#%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%A7%A3%E5%86%B3">ç½‘ç»œå®‰å…¨è§£å†³</a></li>
</ul>
</li>
<li><a href="#rust-%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86-p2p-%E7%BD%91%E7%BB%9C">Rust å¦‚ä½•å¤„ç† P2P ç½‘ç»œ</a>
<ul>
<li><a href="#p2p%E8%81%8A%E5%A4%A9%E5%BA%94%E7%94%A8">P2PèŠå¤©åº”ç”¨</a></li>
<li><a href="#%E6%BC%94%E7%A4%BA">æ¼”ç¤º</a></li>
<li><a href="#%E9%80%9A%E8%AE%AF%E6%A8%A1%E5%9E%8B%E7%BB%83%E4%B9%A0%E9%A2%98">é€šè®¯æ¨¡å‹ç»ƒä¹ é¢˜</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Fri Mar 31 10:32:43 UTC 2023 -->
<!--te-->
<h2 id="é€šè®¯æ¨¡å‹"><a class="header" href="#é€šè®¯æ¨¡å‹">é€šè®¯æ¨¡å‹</a></h2>
<h3 id="åŒå‘é€šè®¯"><a class="header" href="#åŒå‘é€šè®¯">åŒå‘é€šè®¯</a></h3>
<details id="admonition-ç¬”è®°å‰é¢tcp-æœåŠ¡å™¨çš„ä¾‹å­7_1_protocolshtmlstdneté‡Œæ‰€åšçš„éƒ½æ˜¯åŒå‘é€šè®¯è¿™æ˜¯æœ€å…¸å‹çš„ä¸€ç§é€šè®¯æ–¹å¼" class="admonition note">
<summary class="admonition-title">
<p>ç¬”è®°ï¼šå‰é¢<a href="7_1_protocols.html#stdnet"><strong>TCP æœåŠ¡å™¨çš„ä¾‹å­</strong></a>é‡Œï¼Œæ‰€åšçš„éƒ½æ˜¯åŒå‘é€šè®¯ã€‚è¿™æ˜¯æœ€å…¸å‹çš„ä¸€ç§é€šè®¯æ–¹å¼ï¼š</p>
<p><a class="admonition-anchor-link" href="#admonition-ç¬”è®°å‰é¢tcp-æœåŠ¡å™¨çš„ä¾‹å­7_1_protocolshtmlstdneté‡Œæ‰€åšçš„éƒ½æ˜¯åŒå‘é€šè®¯è¿™æ˜¯æœ€å…¸å‹çš„ä¸€ç§é€šè®¯æ–¹å¼"></a></p>
</summary>
<div>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/fbe99846847d7d495685eb7bd62889c0.jpg" alt="img" /></p>
<ol>
<li>æœåŠ¡ç«¯ç›‘å¬9527ç«¯å£</li>
<li>å®¢æˆ·ç«¯è¿æ¥9527ç«¯å£</li>
<li>ä¸€æ—¦è¿æ¥å»ºç«‹ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½å¯ä»¥æ ¹æ®éœ€è¦ä¸»åŠ¨å‘å¯¹æ–¹å‘èµ·ä¼ è¾“ã€‚</li>
<li>æœåŠ¡å™¨æ”¶åˆ°æ¶ˆæ¯åå°±spawnä¸€ä¸ªçº¿ç¨‹å¤„ç†</li>
<li>æ•´ä¸ªç½‘ç»œè¿è¡Œåœ¨å…¨åŒå·¥æ¨¡å¼ä¸‹ï¼ˆfull duplexï¼‰</li>
</ol>
<p>æˆ‘ä»¬ç†Ÿæ‚‰çš„ TCP / WebSocket å°±è¿è¡Œåœ¨è¿™ç§æ¨¡å‹ä¸‹ã€‚</p>
<p>åŒå‘é€šè®¯çš„å¥½å¤„æ˜¯ï¼š<strong>æ•°æ®çš„æµå‘æ˜¯æ²¡æœ‰é™åˆ¶çš„ï¼Œä¸€ç«¯ä¸å¿…ç­‰å¾…å¦ä¸€ç«¯æ‰èƒ½å‘é€æ•°æ®ï¼Œç½‘ç»œå¯ä»¥è¿›è¡Œæ¯”è¾ƒå®æ—¶åœ°å¤„ç†ã€‚</strong></p>
</div>
</details>
<h3 id="è¯·æ±‚å“åº”"><a class="header" href="#è¯·æ±‚å“åº”">è¯·æ±‚å“åº”</a></h3>
<details id="admonition-ç¬”è®°åœ¨-web-å¼€å‘çš„ä¸–ç•Œé‡Œè¯·æ±‚---å“åº”æ¨¡å‹æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„æ¨¡å‹" class="admonition note">
<summary class="admonition-title">
<p>ç¬”è®°ï¼šåœ¨ Web å¼€å‘çš„ä¸–ç•Œé‡Œï¼Œè¯·æ±‚ - å“åº”æ¨¡å‹æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„æ¨¡å‹ã€‚</p>
<p><a class="admonition-anchor-link" href="#admonition-ç¬”è®°åœ¨-web-å¼€å‘çš„ä¸–ç•Œé‡Œè¯·æ±‚---å“åº”æ¨¡å‹æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„æ¨¡å‹"></a></p>
</summary>
<div>
<p>å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®è¯·æ±‚è¿”å›å“åº”ã€‚</p>
<p>æ•´ä¸ªç½‘ç»œå¤„åœ¨åŠåŒå·¥æ¨¡å¼ä¸‹ï¼ˆhalf duplexï¼‰ã€‚HTTP/1.x å°±è¿è¡Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ã€‚</p>
<ul>
<li>ä¸€èˆ¬è€Œè¨€ï¼Œè¯·æ±‚å“åº”æ¨¡å¼ä¸‹ï¼Œåœ¨å®¢æˆ·ç«¯æ²¡æœ‰å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¸ä¼šä¹Ÿæ— æ³•ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ•°æ®ã€‚</li>
<li>é™¤æ­¤ä¹‹å¤–ï¼Œè¯·æ±‚å‘é€çš„é¡ºåºå’Œå“åº”è¿”å›çš„é¡ºåºæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä¸ä¼šä¹Ÿä¸èƒ½ä¹±åºï¼Œè¿™ç§å¤„ç†æ–¹å¼ä¼šå¯¼è‡´**<a href="https://en.wikipedia.org/wiki/Head-of-line_blocking">åº”ç”¨å±‚çš„é˜Ÿå¤´é˜»å¡ï¼ˆHead-Of-Line blockingï¼‰</a>**ã€‚</li>
</ul>
<p>è¯·æ±‚å“åº”æ¨¡å‹å¤„ç†èµ·æ¥å¾ˆç®€å•ï¼Œç”±äº HTTP åè®®çš„æµè¡Œï¼Œå°½ç®¡æœ‰å¾ˆå¤šé™åˆ¶ï¼Œè¯·æ±‚å“åº”æ¨¡å‹è¿˜æ˜¯å¾—åˆ°äº†éå¸¸å¹¿æ³›çš„åº”ç”¨ã€‚</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/3ab96bc728d939b57695ba732ab187ba.jpg" alt="img" /></p>
</div>
</details>
<h3 id="æ§åˆ¶å¹³é¢--æ•°æ®å¹³é¢åˆ†ç¦»"><a class="header" href="#æ§åˆ¶å¹³é¢--æ•°æ®å¹³é¢åˆ†ç¦»">æ§åˆ¶å¹³é¢ / æ•°æ®å¹³é¢åˆ†ç¦»</a></h3>
<p>ä½†æœ‰æ—¶å€™ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼šè¿›è¡Œå¤æ‚çš„é€šè®¯ï¼Œè¿™äº›é€šè®¯åŒ…å«<strong>æ§åˆ¶ä¿¡ä»¤å’Œæ•°æ®æµ</strong>ã€‚</p>
<p>å› ä¸º TCP æœ‰<strong>å¤©ç„¶çš„ç½‘ç»œå±‚çš„é˜Ÿå¤´é˜»å¡</strong>ï¼Œæ‰€ä»¥å½“æ§åˆ¶ä¿¡ä»¤å’Œæ•°æ®äº¤æ‚åœ¨åŒä¸€ä¸ªè¿æ¥ä¸­æ—¶ï¼Œè¿‡å¤§çš„æ•°æ®æµä¼šé˜»å¡æ§åˆ¶ä¿¡ä»¤ï¼Œä½¿å…¶å»¶è¿ŸåŠ å¤§ï¼Œæ— æ³•åŠæ—¶å“åº”ä¸€äº›é‡è¦çš„å‘½ä»¤ã€‚</p>
<p>ä»¥ FTP ä¸ºä¾‹ï¼š</p>
<ul>
<li>å¦‚æœç”¨æˆ·åœ¨ä¼ è¾“ä¸€ä¸ª 1G çš„æ–‡ä»¶åï¼Œå†è¿›è¡Œ ls å‘½ä»¤</li>
<li>å¦‚æœæ–‡ä»¶ä¼ è¾“å’Œ ls å‘½ä»¤éƒ½åœ¨åŒä¸€ä¸ªè¿æ¥ä¸­è¿›è¡Œï¼Œé‚£ä¹ˆï¼Œåªæœ‰æ–‡ä»¶ä¼ è¾“ç»“æŸï¼Œç”¨æˆ·æ‰ä¼šçœ‹åˆ° ls å‘½ä»¤çš„ç»“æœï¼Œè¿™æ ·æ˜¾ç„¶å¯¹ç”¨æˆ·éå¸¸ä¸å‹å¥½ã€‚</li>
</ul>
<details id="admonition--æ‰€ä»¥æˆ‘ä»¬ä¼šé‡‡ç”¨æ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢åˆ†ç¦»çš„æ–¹å¼è¿›è¡Œç½‘ç»œå¤„ç†" class="admonition note">
<summary class="admonition-title">
<blockquote>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨æ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢åˆ†ç¦»çš„æ–¹å¼ï¼Œè¿›è¡Œç½‘ç»œå¤„ç†:</p>
</blockquote>
<p><a class="admonition-anchor-link" href="#admonition--æ‰€ä»¥æˆ‘ä»¬ä¼šé‡‡ç”¨æ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢åˆ†ç¦»çš„æ–¹å¼è¿›è¡Œç½‘ç»œå¤„ç†"></a></p>
</summary>
<div>
<ol>
<li>
<p>connect()/ctrl_send/ctrl_recv:</p>
<p>å®¢æˆ·ç«¯ä¼šé¦–å…ˆè¿æ¥æœåŠ¡å™¨ï¼Œå»ºç«‹æ§åˆ¶è¿æ¥ã€‚æ§åˆ¶è¿æ¥æ˜¯ä¸€ä¸ªé•¿è¿æ¥ï¼Œä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°äº¤äº’ç»ˆæ­¢ã€‚</p>
</li>
<li>
<p>connect/data_send/data_recv:</p>
<p>ç„¶åï¼ŒäºŒè€…ä¼šæ ¹æ®éœ€è¦é¢å¤–åˆ›å»ºæ–°çš„ä¸´æ—¶çš„æ•°æ®è¿æ¥ï¼Œç”¨äºä¼ è¾“å¤§å®¹é‡çš„æ•°æ®ï¼Œæ•°æ®è¿æ¥åœ¨å®Œæˆç›¸åº”çš„å·¥ä½œåï¼Œä¼šè‡ªåŠ¨å…³é—­ã€‚</p>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/9617389f71bbf9ef08c4955754107eb8.jpg" alt="img" /></p>
</div>
</details>
<details id="admonition-é™¤-ftp-å¤–è¿˜æœ‰å¾ˆå¤šåè®®éƒ½æ˜¯ç±»ä¼¼çš„å¤„ç†æ–¹å¼" class="admonition note">
<summary class="admonition-title">
<p>é™¤ FTP å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šåè®®éƒ½æ˜¯ç±»ä¼¼çš„å¤„ç†æ–¹å¼:</p>
<p><a class="admonition-anchor-link" href="#admonition-é™¤-ftp-å¤–è¿˜æœ‰å¾ˆå¤šåè®®éƒ½æ˜¯ç±»ä¼¼çš„å¤„ç†æ–¹å¼"></a></p>
</summary>
<div>
<ol>
<li>
<p>æ¯”å¦‚**<a href="https://en.wikipedia.org/wiki/Session_Initiation_Protocol">å¤šåª’ä½“é€šè®¯åè®®SIP åè®®</a>**ã€‚</p>
</li>
<li>
<p>HTTP/2 å’Œå€Ÿé‰´äº† HTTP/2 çš„ç”¨äºå¤šè·¯å¤ç”¨çš„ Yamux åè®®ï¼Œè™½ç„¶è¿è¡Œåœ¨åŒä¸€ä¸ª TCP è¿æ¥ä¹‹ä¸Šï¼Œå®ƒä»¬åœ¨åº”ç”¨å±‚ä¹Ÿæ„å»ºäº†ç±»ä¼¼çš„æ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢ã€‚</p>
</li>
</ol>
<blockquote>
<p>ä»¥ HTTP/2 ä¸ºä¾‹</p>
</blockquote>
<ul>
<li>
<p>æ§åˆ¶å¹³é¢ï¼ˆctrl streamï¼‰å¯ä»¥åˆ›å»ºå¾ˆå¤šæ–°çš„ streamï¼Œç”¨äºå¹¶è¡Œå¤„ç†å¤šä¸ªåº”ç”¨å±‚çš„è¯·æ±‚</p>
</li>
<li>
<p>æ¯”å¦‚ä½¿ç”¨ HTTP/2 çš„ gRPCï¼Œå„ä¸ªè¯·æ±‚å¯ä»¥å¹¶è¡Œå¤„ç†</p>
</li>
<li>
<p>ä¸åŒ stream ä¹‹é—´çš„æ•°æ®å¯ä»¥ä¹±åºè¿”å›ï¼Œè€Œä¸å¿…å—è¯·æ±‚å“åº”æ¨¡å‹çš„é™åˆ¶</p>
</li>
</ul>
<blockquote>
<p>è™½ç„¶ HTTP/2 ä¾æ—§å—å›°äº TCP å±‚çš„é˜Ÿå¤´é˜»å¡ï¼Œä½†å®ƒè§£å†³äº†åº”ç”¨å±‚çš„é˜Ÿå¤´é˜»å¡ã€‚</p>
</blockquote>
</div>
</details>
<h3 id="p2p-ç½‘ç»œ"><a class="header" href="#p2p-ç½‘ç»œ">P2P ç½‘ç»œ</a></h3>
<p>å‰é¢æˆ‘ä»¬è°ˆè®ºçš„ç½‘ç»œé€šè®¯æ¨¡å‹ï¼Œéƒ½æ˜¯ä¼ ç»Ÿçš„å®¢æˆ·ç«¯ / æœåŠ¡å™¨äº¤äº’æ¨¡å‹ï¼ˆC/S æˆ– B/Sï¼‰:</p>
<p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨ç½‘ç»œä¸­çš„ä½œç”¨æ˜¯ä¸å¯¹ç­‰çš„ï¼Œå®¢æˆ·ç«¯æ°¸è¿œæ˜¯è¿æ¥çš„å‘èµ·æ–¹ï¼Œè€ŒæœåŠ¡å™¨æ˜¯è¿æ¥çš„å¤„ç†æ–¹ã€‚</p>
<blockquote>
<p>ä¸å¯¹ç­‰çš„ç½‘ç»œæ¨¡å‹æœ‰å¾ˆå¤šå¥½å¤„</p>
</blockquote>
<p>æ¯”å¦‚å®¢æˆ·ç«¯ä¸éœ€è¦å…¬ç½‘åœ°å€ï¼Œå¯ä»¥éšè—åœ¨ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰è®¾å¤‡ï¼ˆæ¯”å¦‚ NAT ç½‘å…³ã€é˜²ç«å¢™ï¼‰ä¹‹åï¼Œåªè¦æœåŠ¡å™¨æ‹¥æœ‰å…¬ç½‘åœ°å€ï¼Œè¿™ä¸ªç½‘ç»œå°±å¯ä»¥è¿é€šã€‚</p>
<p>æ‰€ä»¥ï¼Œå®¢æˆ·ç«¯ / æœåŠ¡å™¨æ¨¡å‹æ˜¯å¤©ç„¶ä¸­å¿ƒåŒ–çš„ï¼Œæ‰€æœ‰è¿æ¥éƒ½éœ€è¦ç»è¿‡æœåŠ¡å™¨è¿™ä¸ªä¸­é—´äººï¼Œå³ä¾¿æ˜¯ä¸¤ä¸ªå®¢æˆ·ç«¯çš„æ•°æ®äº¤äº’ä¹Ÿä¸ä¾‹å¤–ã€‚</p>
<p>è¿™ç§æ¨¡å‹éšç€äº’è”ç½‘çš„å¤§è§„æ¨¡ä½¿ç”¨æˆä¸ºäº†ç½‘ç»œä¸–ç•Œçš„ä¸»æµã€‚</p>
<blockquote>
<p>ç„¶è€Œï¼Œå¾ˆå¤šåº”ç”¨åœºæ™¯éœ€è¦é€šè®¯çš„ä¸¤ç«¯å¯ä»¥ç›´æ¥äº¤äº’ï¼Œè€Œæ— éœ€ä¸€ä¸ªä¸­é—´äººä»£ä¸ºä¸­è½¬ã€‚</p>
</blockquote>
<p>æ¯”å¦‚ A å’Œ B åˆ†äº«ä¸€ä¸ª 1G çš„æ–‡ä»¶ï¼Œå¦‚æœé€šè¿‡æœåŠ¡å™¨ä¸­è½¬ï¼Œæ•°æ®ç›¸å½“äºä¼ è¾“äº†ä¸¤æ¬¡ï¼Œæ•ˆç‡å¾ˆä½ã€‚</p>
<blockquote>
<p>P2P æ¨¡å‹æ‰“ç ´äº†è¿™ç§ä¸å¯¹ç­‰çš„å…³ç³»ï¼Œä½¿å¾—ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹åœ¨ç†è®ºä¸Šå¯ä»¥ç›´æ¥è¿æ¥ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ—¢æ˜¯å®¢æˆ·ç«¯ï¼Œåˆæ˜¯æœåŠ¡å™¨ã€‚</p>
</blockquote>
<h2 id="å¦‚ä½•æ„å»º-p2p-ç½‘ç»œ"><a class="header" href="#å¦‚ä½•æ„å»º-p2p-ç½‘ç»œ">å¦‚ä½•æ„å»º P2P ç½‘ç»œ</a></h2>
<p>å¯æ˜¯ç”±äºå†å²ä¸Š IPv4 åœ°å€çš„ç¼ºä¹ï¼Œä»¥åŠå¯¹éšç§å’Œç½‘ç»œå®‰å…¨çš„æ‹…å¿§ï¼Œäº’è”ç½‘çš„è¿è¥å•†åœ¨æ¥å…¥ç«¯ï¼Œå¤§é‡ä½¿ç”¨äº† NAT è®¾å¤‡ï¼Œä½¿å¾—æ™®é€šçš„ç½‘ç»œç”¨æˆ·ï¼Œç¼ºä¹ç›´æ¥å¯ä»¥è®¿é—®çš„å…¬ç½‘ IPã€‚</p>
<p>å› è€Œï¼Œæ„å»ºä¸€ä¸ª P2P ç½‘ç»œé¦–å…ˆéœ€è¦è§£å†³ç½‘ç»œçš„è¿é€šæ€§ã€‚</p>
<h3 id="è§£å†³ç½‘ç»œè¿é€š"><a class="header" href="#è§£å†³ç½‘ç»œè¿é€š">è§£å†³ç½‘ç»œè¿é€š</a></h3>
<details id="admonition-ç¬”è®°ä¸»æµçš„è§£å†³æ–¹æ³•" class="admonition note">
<summary class="admonition-title">
<p>ç¬”è®°ï¼šä¸»æµçš„è§£å†³æ–¹æ³•</p>
<p><a class="admonition-anchor-link" href="#admonition-ç¬”è®°ä¸»æµçš„è§£å†³æ–¹æ³•"></a></p>
</summary>
<div>
<ol>
<li>
<p>æ¢ç´¢</p>
<p>P2P ç½‘ç»œçš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œéƒ½ä¼šé¦–å…ˆä¼šé€šè¿‡ STUN æœåŠ¡å™¨æ¢ç´¢è‡ªå·±çš„å…¬ç½‘ IP/port</p>
</li>
<li>
<p>æ³¨å†Œ</p>
<p>ç„¶ååœ¨ bootstrap/signaling server ä¸Šæ³¨å†Œè‡ªå·±çš„å…¬ç½‘ IP/portï¼Œè®©åˆ«äººèƒ½å‘ç°è‡ªå·±ï¼Œä»è€Œå’Œæ½œåœ¨çš„â€œé‚»å±…â€å»ºç«‹è¿æ¥ã€‚</p>
</li>
</ol>
<p>åœ¨ä¸€ä¸ªå¤§å‹çš„ P2P ç½‘ç»œä¸­ï¼Œä¸€ä¸ªèŠ‚ç‚¹å¸¸å¸¸ä¼šæ‹¥æœ‰å‡ åä¸ªé‚»å±…ï¼Œé€šè¿‡è¿™äº›é‚»å±…ä»¥åŠé‚»å±…æŒæ¡çš„ç½‘ç»œä¿¡æ¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½æ„å»ºä¸€å¼ å¦‚ä½•æ‰¾åˆ°æŸä¸ªèŠ‚ç‚¹ï¼ˆæŸä¸ªæ•°æ®ï¼‰çš„è·¯ç”±è¡¨ã€‚</p>
<p>åœ¨æ­¤ä¹‹ä¸Šï¼ŒèŠ‚ç‚¹è¿˜å¯ä»¥åŠ å…¥æŸä¸ªæˆ–è€…æŸäº› topicï¼Œç„¶åé€šè¿‡æŸäº›åè®®ï¼ˆæ¯”å¦‚ gossipï¼‰åœ¨æ•´ä¸ª topic ä¸‹æ‰©æ•£æ¶ˆæ¯ï¼š</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/ef8f35f961d4771729a18f69becd4274.jpg" alt="img" /></p>
</div>
</details>
<h3 id="æ‰¿è½½å¤šä¸ªåè®®"><a class="header" href="#æ‰¿è½½å¤šä¸ªåè®®">æ‰¿è½½å¤šä¸ªåè®®</a></h3>
<p>P2P ç½‘ç»œçš„æ„å»ºï¼Œä¸€èˆ¬è¦æ¯”å®¢æˆ·ç«¯ / æœåŠ¡å™¨ç½‘ç»œå¤æ‚ï¼Œå› ä¸ºèŠ‚ç‚¹é—´çš„è¿æ¥è¦æ‰¿è½½å¾ˆå¤šåè®®ï¼š</p>
<ul>
<li>
<p>èŠ‚ç‚¹å‘ç°ï¼ˆmDNSã€bootstrapã€Kad DHTï¼‰</p>
</li>
<li>
<p>èŠ‚ç‚¹è·¯ç”±ï¼ˆKad DHTï¼‰</p>
</li>
<li>
<p>å†…å®¹å‘ç°ï¼ˆpubsubã€Kad DHTï¼‰</p>
</li>
<li>
<p>åº”ç”¨å±‚åè®®</p>
</li>
</ul>
<blockquote>
<p>åŒæ—¶ï¼Œè¿æ¥çš„å®‰å…¨æ€§å—åˆ°çš„æŒ‘æˆ˜ä¹Ÿå’Œä¹‹å‰ä¸åŒã€‚</p>
</blockquote>
<details id="admonition-ç¬”è®°æ‰€ä»¥æˆ‘ä»¬ä¼šçœ‹åˆ°p2p-åè®®çš„è¿æ¥å¾€å¾€åœ¨ä¸€ä¸ª-tcp-è¿æ¥ä¸­ä½¿ç”¨ç±»ä¼¼-yamux-çš„å¤šè·¯å¤ç”¨åè®®æ¥æ‰¿è½½å¾ˆå¤šå…¶ä»–åè®®" class="admonition note">
<summary class="admonition-title">
<p>ç¬”è®°ï¼šæ‰€ä»¥æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼ŒP2P åè®®çš„è¿æ¥ï¼Œå¾€å¾€åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­ï¼Œ<strong>ä½¿ç”¨ç±»ä¼¼ yamux çš„å¤šè·¯å¤ç”¨åè®®æ¥æ‰¿è½½å¾ˆå¤šå…¶ä»–åè®®</strong></p>
<p><a class="admonition-anchor-link" href="#admonition-ç¬”è®°æ‰€ä»¥æˆ‘ä»¬ä¼šçœ‹åˆ°p2p-åè®®çš„è¿æ¥å¾€å¾€åœ¨ä¸€ä¸ª-tcp-è¿æ¥ä¸­ä½¿ç”¨ç±»ä¼¼-yamux-çš„å¤šè·¯å¤ç”¨åè®®æ¥æ‰¿è½½å¾ˆå¤šå…¶ä»–åè®®"></a></p>
</summary>
<div>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/765b2b7f05986c87dfa524ff9f5980f3.jpg" alt="img" /></p>
</div>
</details>
<h3 id="ç½‘ç»œå®‰å…¨è§£å†³"><a class="header" href="#ç½‘ç»œå®‰å…¨è§£å†³">ç½‘ç»œå®‰å…¨è§£å†³</a></h3>
<p>åœ¨ç½‘ç»œå®‰å…¨æ–¹é¢ï¼ŒTLS è™½ç„¶èƒ½å¾ˆå¥½åœ°ä¿æŠ¤å®¢æˆ·ç«¯ / æœåŠ¡å™¨æ¨¡å‹ï¼Œ<strong>ç„¶è€Œè¯ä¹¦çš„åˆ›å»ºã€å‘æ”¾ä»¥åŠä¿¡ä»»å¯¹ P2P ç½‘ç»œæ˜¯ä¸ªé—®é¢˜</strong></p>
<blockquote>
<p>æ‰€ä»¥ P2P ç½‘ç»œå€¾å‘äºä½¿ç”¨è‡ªå·±çš„å®‰å…¨åè®®ï¼Œæˆ–è€…ä½¿ç”¨ noise protocolï¼Œæ¥æ„å»ºå®‰å…¨ç­‰çº§å¯ä»¥åª²ç¾ TLS 1.3 çš„å®‰å…¨åè®®ã€‚</p>
</blockquote>
<h2 id="rust-å¦‚ä½•å¤„ç†-p2p-ç½‘ç»œ"><a class="header" href="#rust-å¦‚ä½•å¤„ç†-p2p-ç½‘ç»œ">Rust å¦‚ä½•å¤„ç† P2P ç½‘ç»œ</a></h2>
<blockquote>
<p>åœ¨ Rust ä¸‹ï¼Œæœ‰ **<a href="https://docs.rs/libp2p/latest/libp2p/">libp2p è¿™ä¸ªæ¯”è¾ƒæˆç†Ÿçš„åº“</a>**æ¥å¤„ç† P2P ç½‘ç»œã€‚</p>
</blockquote>
<h3 id="p2pèŠå¤©åº”ç”¨"><a class="header" href="#p2pèŠå¤©åº”ç”¨">P2PèŠå¤©åº”ç”¨</a></h3>
<details id="admonition-ä¾‹å­--ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„-p2p-èŠå¤©åº”ç”¨åœ¨æœ¬åœ°ç½‘ç»œä¸­é€šè¿‡-mdns-åšèŠ‚ç‚¹å‘ç°ä½¿ç”¨-floodpub-åšæ¶ˆæ¯ä¼ æ’­-githubhttpsgithubcomkuanhsiaokuogeektime-tyr-rustblobmaingeektime_rust_codes29_networkexamplesp2p_chatrs" class="admonition example">
<summary class="admonition-title">
<p>ä¾‹å­:  ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ P2P èŠå¤©åº”ç”¨ï¼šåœ¨æœ¬åœ°ç½‘ç»œä¸­é€šè¿‡ MDNS åšèŠ‚ç‚¹å‘ç°ï¼Œä½¿ç”¨ floodpub åšæ¶ˆæ¯ä¼ æ’­ã€‚ (<a href="https://github.com/KuanHsiaoKuo/geektime-tyr-rust/blob/main/geektime_rust_codes/29_network/examples/p2p_chat.rs">github</a>) </p>
<p><a class="admonition-anchor-link" href="#admonition-ä¾‹å­--ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„-p2p-èŠå¤©åº”ç”¨åœ¨æœ¬åœ°ç½‘ç»œä¸­é€šè¿‡-mdns-åšèŠ‚ç‚¹å‘ç°ä½¿ç”¨-floodpub-åšæ¶ˆæ¯ä¼ æ’­-githubhttpsgithubcomkuanhsiaokuogeektime-tyr-rustblobmaingeektime_rust_codes29_networkexamplesp2p_chatrs"></a></p>
</summary>
<div>
<p>åœ¨å…³é”®ä½ç½®éƒ½å†™äº†æ³¨é‡Šï¼š</p>
<pre><pre class="playground"><code class="language-rust  editable">use anyhow::Result;
use futures::StreamExt;
use libp2p::{
    core::upgrade,
    floodsub::{self, Floodsub, FloodsubEvent, Topic},
    identity,
    mdns::{Mdns, MdnsEvent},
    noise,
    swarm::{NetworkBehaviourEventProcess, SwarmBuilder, SwarmEvent},
    tcp::TokioTcpConfig,
    yamux, NetworkBehaviour, PeerId, Swarm, Transport,
};
use std::borrow::Cow;
use tokio::io::{stdin, AsyncBufReadExt, BufReader};

/// å¤„ç† p2p ç½‘ç»œçš„ behavior æ•°æ®ç»“æ„
/// é‡Œé¢çš„æ¯ä¸ªåŸŸéœ€è¦å®ç° NetworkBehaviourï¼Œæˆ–è€…ä½¿ç”¨ #[behaviour(ignore)]
#[derive(NetworkBehaviour)]
#[behaviour(event_process = true)]
struct ChatBehavior {
    /// flood subscriptionï¼Œæ¯”è¾ƒæµªè´¹å¸¦å®½ï¼Œgossipsub æ˜¯æ›´å¥½çš„é€‰æ‹©
    floodsub: Floodsub,
    /// æœ¬åœ°èŠ‚ç‚¹å‘ç°æœºåˆ¶
    mdns: Mdns,
    // åœ¨ behavior ç»“æ„ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥æ”¾å…¶å®ƒæ•°æ®ï¼Œä½†éœ€è¦ ignore
    // #[behaviour(ignore)]
    // _useless: String,
}

impl ChatBehavior {
    /// åˆ›å»ºä¸€ä¸ªæ–°çš„ ChatBehavior
    pub async fn new(id: PeerId) -&gt; Result&lt;Self&gt; {
        Ok(Self {
            mdns: Mdns::new(Default::default()).await?,
            floodsub: Floodsub::new(id),
        })
    }
}

impl NetworkBehaviourEventProcess&lt;FloodsubEvent&gt; for ChatBehavior {
    // å¤„ç† floodsub äº§ç”Ÿçš„æ¶ˆæ¯
    fn inject_event(&amp;mut self, event: FloodsubEvent) {
        if let FloodsubEvent::Message(msg) = event {
            let text = String::from_utf8_lossy(&amp;msg.data);
            println!(&quot;{:?}: {:?}&quot;, msg.source, text);
        }
    }
}

impl NetworkBehaviourEventProcess&lt;MdnsEvent&gt; for ChatBehavior {
    fn inject_event(&amp;mut self, event: MdnsEvent) {
        match event {
            MdnsEvent::Discovered(list) =&gt; {
                // æŠŠ mdns å‘ç°çš„æ–°çš„ peer åŠ å…¥åˆ° floodsub çš„ view ä¸­
                for (id, addr) in list {
                    println!(&quot;Got peer: {} with addr {}&quot;, &amp;id, &amp;addr);
                    self.floodsub.add_node_to_partial_view(id);
                }
            }
            MdnsEvent::Expired(list) =&gt; {
                // æŠŠ mdns å‘ç°çš„ç¦»å¼€çš„ peer åŠ å…¥åˆ° floodsub çš„ view ä¸­
                for (id, addr) in list {
                    println!(&quot;Removed peer: {} with addr {}&quot;, &amp;id, &amp;addr);
                    self.floodsub.remove_node_from_partial_view(&amp;id);
                }
            }
        }
    }
}

#[tokio::main]
async fn main() -&gt; Result&lt;()&gt; {
    // å¦‚æœå¸¦å‚æ•°ï¼Œå½“æˆä¸€ä¸ª topic
    let name = match std::env::args().nth(1) {
        Some(arg) =&gt; Cow::Owned(arg),
        None =&gt; Cow::Borrowed(&quot;lobby&quot;),
    };

    // åˆ›å»º floodsub topic
    let topic = floodsub::Topic::new(name);

    // åˆ›å»º swarm
    let mut swarm = create_swarm(topic.clone()).await?;

    swarm.listen_on(&quot;/ip4/127.0.0.1/tcp/0&quot;.parse()?)?;

    // è·å– stdin çš„æ¯ä¸€è¡Œ
    let mut stdin = BufReader::new(stdin()).lines();

    // main loop
    loop {
        tokio::select! {
            line = stdin.next_line() =&gt; {
                let line = line?.expect(&quot;stdin closed&quot;);
                swarm.behaviour_mut().floodsub.publish(topic.clone(), line.as_bytes());
            }
            event = swarm.select_next_some() =&gt; {
                if let SwarmEvent::NewListenAddr { address, .. } = event {
                    println!(&quot;Listening on {:?}&quot;, address);
                }
            }
        }
    }
}

async fn create_swarm(topic: Topic) -&gt; Result&lt;Swarm&lt;ChatBehavior&gt;&gt; {
    // åˆ›å»º identityï¼ˆå¯†é’¥å¯¹ï¼‰
    let id_keys = identity::Keypair::generate_ed25519();
    let peer_id = PeerId::from(id_keys.public());
    println!(&quot;Local peer id: {:?}&quot;, peer_id);

    // ä½¿ç”¨ noise protocol æ¥å¤„ç†åŠ å¯†å’Œè®¤è¯
    let noise_keys = noise::Keypair::&lt;noise::X25519Spec&gt;::new().into_authentic(&amp;id_keys)?;

    // åˆ›å»ºä¼ è¾“å±‚
    let transport = TokioTcpConfig::new()
        .nodelay(true)
        .upgrade(upgrade::Version::V1)
        .authenticate(noise::NoiseConfig::xx(noise_keys).into_authenticated())
        .multiplex(yamux::YamuxConfig::default())
        .boxed();

    // åˆ›å»º chat behavior
    let mut behavior = ChatBehavior::new(peer_id).await?;
    // è®¢é˜…æŸä¸ªä¸»é¢˜
    behavior.floodsub.subscribe(topic.clone());
    // åˆ›å»º swarm
    let swarm = SwarmBuilder::new(transport, behavior, peer_id)
        .executor(Box::new(|fut| {
            tokio::spawn(fut);
        }))
        .build();

    Ok(swarm)
}
</code></pre></pre>
</div>
</details>
<details id="admonition-è¦è¿è¡Œè¿™æ®µä»£ç ä½ éœ€è¦åœ¨-cargotoml-ä¸­ä½¿ç”¨-futures-å’Œ-libp2p" class="admonition example">
<summary class="admonition-title">
<p>è¦è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ éœ€è¦åœ¨ Cargo.toml ä¸­ä½¿ç”¨ futures å’Œ libp2pï¼š </p>
<p><a class="admonition-anchor-link" href="#admonition-è¦è¿è¡Œè¿™æ®µä»£ç ä½ éœ€è¦åœ¨-cargotoml-ä¸­ä½¿ç”¨-futures-å’Œ-libp2p"></a></p>
</summary>
<div>
<pre><code class="language-toml">futures = &quot;0.3&quot;
libp2p = { version = &quot;0.39&quot;,  features = [&quot;tcp-tokio&quot;] }
</code></pre>
</div>
</details>
<h3 id="æ¼”ç¤º"><a class="header" href="#æ¼”ç¤º">æ¼”ç¤º</a></h3>
<details id="admonition-ä¾‹å­-å¼€ä¸€ä¸ªçª—å£-a-è¿è¡Œ" class="admonition example">
<summary class="admonition-title">
<p>ä¾‹å­: å¼€ä¸€ä¸ªçª—å£ A è¿è¡Œï¼š</p>
<p><a class="admonition-anchor-link" href="#admonition-ä¾‹å­-å¼€ä¸€ä¸ªçª—å£-a-è¿è¡Œ"></a></p>
</summary>
<div>
<pre><code class="language-shell">â¯ cargo run --example p2p_chat --quiet
Local peer id: PeerId(&quot;12D3KooWDJtZVKBCa7B9C8ZQmRpP7cB7CgeG7PWLXYCnN3aXkaVg&quot;)
Listening on &quot;/ip4/127.0.0.1/tcp/51654&quot;
// ä¸‹é¢çš„å†…å®¹åœ¨æ–°èŠ‚ç‚¹åŠ å…¥æ—¶é€æ¸å‡ºç°
Got peer: 12D3KooWAw1gTLCesw1bvTiKNYFyacwbAcjvKwfDsJiH8AuBFgFA with addr /ip4/192.168.86.23/tcp/51656
Got peer: 12D3KooWAw1gTLCesw1bvTiKNYFyacwbAcjvKwfDsJiH8AuBFgFA with addr /ip4/127.0.0.1/tcp/51656
Got peer: 12D3KooWMRQvxJcjcexCrNfgSVd2iChpiDWzbgRRS6c5mn9bBzdT with addr /ip4/192.168.86.23/tcp/51661
Got peer: 12D3KooWMRQvxJcjcexCrNfgSVd2iChpiDWzbgRRS6c5mn9bBzdT with addr /ip4/127.0.0.1/tcp/51661
Got peer: 12D3KooWRy9r8j7UQMxavqTcNmoz1JmnLcTU5UZvzvE5jz4Zw3eh with addr /ip4/192.168.86.23/tcp/51670
Got peer: 12D3KooWRy9r8j7UQMxavqTcNmoz1JmnLcTU5UZvzvE5jz4Zw3eh with addr /ip4/127.0.0.1/tcp/51670
</code></pre>
</div>
</details>
<details id="admonition-ä¾‹å­--çª—å£-b" class="admonition example">
<summary class="admonition-title">
<p>ä¾‹å­:  çª—å£ B</p>
<p><a class="admonition-anchor-link" href="#admonition-ä¾‹å­--çª—å£-b"></a></p>
</summary>
<div>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>â¯ cargo run --example p2p_chat --quiet
Local peer id: PeerId(&quot;12D3KooWAw1gTLCesw1bvTiKNYFyacwbAcjvKwfDsJiH8AuBFgFA&quot;)
Listening on &quot;/ip4/127.0.0.1/tcp/51656&quot;
Got peer: 12D3KooWDJtZVKBCa7B9C8ZQmRpP7cB7CgeG7PWLXYCnN3aXkaVg with addr /ip4/192.168.86.23/tcp/51654
Got peer: 12D3KooWDJtZVKBCa7B9C8ZQmRpP7cB7CgeG7PWLXYCnN3aXkaVg with addr /ip4/127.0.0.1/tcp/51654
// ä¸‹é¢çš„å†…å®¹åœ¨æ–°èŠ‚ç‚¹åŠ å…¥æ—¶é€æ¸å‡ºç°
Got peer: 12D3KooWMRQvxJcjcexCrNfgSVd2iChpiDWzbgRRS6c5mn9bBzdT with addr /ip4/192.168.86.23/tcp/51661
Got peer: 12D3KooWMRQvxJcjcexCrNfgSVd2iChpiDWzbgRRS6c5mn9bBzdT with addr /ip4/127.0.0.1/tcp/51661
Got peer: 12D3KooWRy9r8j7UQMxavqTcNmoz1JmnLcTU5UZvzvE5jz4Zw3eh with addr /ip4/192.168.86.23/tcp/51670
Got peer: 12D3KooWRy9r8j7UQMxavqTcNmoz1JmnLcTU5UZvzvE5jz4Zw3eh with addr /ip4/127.0.0.1/tcp/51670
<span class="boring">}
</span></code></pre></pre>
</div>
</details>
<details id="admonition-ä¾‹å­--çª—å£c" class="admonition example">
<summary class="admonition-title">
<p>ä¾‹å­:  çª—å£C </p>
<p><a class="admonition-anchor-link" href="#admonition-ä¾‹å­--çª—å£c"></a></p>
</summary>
<div>
<pre><code class="language-shell">â¯ cargo run --example p2p_chat --quiet
Local peer id: PeerId(&quot;12D3KooWMRQvxJcjcexCrNfgSVd2iChpiDWzbgRRS6c5mn9bBzdT&quot;)
Listening on &quot;/ip4/127.0.0.1/tcp/51661&quot;
Got peer: 12D3KooWAw1gTLCesw1bvTiKNYFyacwbAcjvKwfDsJiH8AuBFgFA with addr /ip4/192.168.86.23/tcp/51656
Got peer: 12D3KooWAw1gTLCesw1bvTiKNYFyacwbAcjvKwfDsJiH8AuBFgFA with addr /ip4/127.0.0.1/tcp/51656
Got peer: 12D3KooWDJtZVKBCa7B9C8ZQmRpP7cB7CgeG7PWLXYCnN3aXkaVg with addr /ip4/192.168.86.23/tcp/51654
Got peer: 12D3KooWDJtZVKBCa7B9C8ZQmRpP7cB7CgeG7PWLXYCnN3aXkaVg with addr /ip4/127.0.0.1/tcp/51654
// ä¸‹é¢çš„å†…å®¹åœ¨æ–°èŠ‚ç‚¹åŠ å…¥æ—¶é€æ¸å‡ºç°
Got peer: 12D3KooWRy9r8j7UQMxavqTcNmoz1JmnLcTU5UZvzvE5jz4Zw3eh with addr /ip4/192.168.86.23/tcp/51670
Got peer: 12D3KooWRy9r8j7UQMxavqTcNmoz1JmnLcTU5UZvzvE5jz4Zw3eh with addr /ip4/127.0.0.1/tcp/51670
</code></pre>
</div>
</details>
<details id="admonition-ä¾‹å­--çª—å£-d-ä½¿ç”¨-topic-å‚æ•°è®©å®ƒå’Œå…¶å®ƒçš„-topic-ä¸åŒ" class="admonition example">
<summary class="admonition-title">
<p>ä¾‹å­:  çª—å£ D ä½¿ç”¨ topic å‚æ•°ï¼Œè®©å®ƒå’Œå…¶å®ƒçš„ topic ä¸åŒ </p>
<p><a class="admonition-anchor-link" href="#admonition-ä¾‹å­--çª—å£-d-ä½¿ç”¨-topic-å‚æ•°è®©å®ƒå’Œå…¶å®ƒçš„-topic-ä¸åŒ"></a></p>
</summary>
<div>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>â¯ cargo run --example p2p_chat --quiet -- hello
Local peer id: PeerId(&quot;12D3KooWRy9r8j7UQMxavqTcNmoz1JmnLcTU5UZvzvE5jz4Zw3eh&quot;)
Listening on &quot;/ip4/127.0.0.1/tcp/51670&quot;
Got peer: 12D3KooWMRQvxJcjcexCrNfgSVd2iChpiDWzbgRRS6c5mn9bBzdT with addr /ip4/192.168.86.23/tcp/51661
Got peer: 12D3KooWMRQvxJcjcexCrNfgSVd2iChpiDWzbgRRS6c5mn9bBzdT with addr /ip4/127.0.0.1/tcp/51661
Got peer: 12D3KooWAw1gTLCesw1bvTiKNYFyacwbAcjvKwfDsJiH8AuBFgFA with addr /ip4/192.168.86.23/tcp/51656
Got peer: 12D3KooWAw1gTLCesw1bvTiKNYFyacwbAcjvKwfDsJiH8AuBFgFA with addr /ip4/127.0.0.1/tcp/51656
Got peer: 12D3KooWDJtZVKBCa7B9C8ZQmRpP7cB7CgeG7PWLXYCnN3aXkaVg with addr /ip4/192.168.86.23/tcp/51654
Got peer: 12D3KooWDJtZVKBCa7B9C8ZQmRpP7cB7CgeG7PWLXYCnN3aXkaVg with addr /ip4/127.0.0.1/tcp/51654
<span class="boring">}
</span></code></pre></pre>
</div>
</details>
<p>ä½ ä¼šçœ‹åˆ°ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¿è¡Œæ—¶ï¼Œéƒ½ä¼šé€šè¿‡ MDNS å¹¿æ’­ï¼Œæ¥å‘ç°æœ¬åœ°å·²æœ‰çš„ P2P èŠ‚ç‚¹ã€‚</p>
<blockquote>
<p>ç°åœ¨ A/B/C/D ç»„æˆäº†ä¸€ä¸ª P2P ç½‘ç»œï¼Œå…¶ä¸­ A/B/C éƒ½è®¢é˜…äº† lobbyï¼Œè€Œ D è®¢é˜…äº† helloã€‚</p>
</blockquote>
<details id="admonition-ä¾‹å­--æˆ‘ä»¬åœ¨-abcd-å››ä¸ªçª—å£ä¸­åˆ†åˆ«è¾“å…¥-hello-from-xå¯ä»¥çœ‹åˆ°" class="admonition example">
<summary class="admonition-title">
<p>ä¾‹å­:  æˆ‘ä»¬åœ¨ A/B/C/D å››ä¸ªçª—å£ä¸­åˆ†åˆ«è¾“å…¥ â€œHello from Xâ€ï¼Œå¯ä»¥çœ‹åˆ° </p>
<p><a class="admonition-anchor-link" href="#admonition-ä¾‹å­--æˆ‘ä»¬åœ¨-abcd-å››ä¸ªçª—å£ä¸­åˆ†åˆ«è¾“å…¥-hello-from-xå¯ä»¥çœ‹åˆ°"></a></p>
</summary>
<div>
<ul>
<li>çª—å£ Aï¼š</li>
</ul>
<pre><code class="language-shell">hello from A

PeerId(&quot;12D3KooWAw1gTLCesw1bvTiKNYFyacwbAcjvKwfDsJiH8AuBFgFA&quot;): &quot;hello from B&quot;

PeerId(&quot;12D3KooWMRQvxJcjcexCrNfgSVd2iChpiDWzbgRRS6c5mn9bBzdT&quot;): &quot;hello from C&quot;
</code></pre>
<ul>
<li>çª—å£ Bï¼š</li>
</ul>
<pre><code class="language-shell">PeerId(&quot;12D3KooWDJtZVKBCa7B9C8ZQmRpP7cB7CgeG7PWLXYCnN3aXkaVg&quot;): &quot;hello from A&quot;

hello from B

PeerId(&quot;12D3KooWMRQvxJcjcexCrNfgSVd2iChpiDWzbgRRS6c5mn9bBzdT&quot;): &quot;hello from C&quot;
</code></pre>
<ul>
<li>çª—å£ Cï¼š</li>
</ul>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>PeerId(&quot;12D3KooWDJtZVKBCa7B9C8ZQmRpP7cB7CgeG7PWLXYCnN3aXkaVg&quot;): &quot;hello from A&quot;

PeerId(&quot;12D3KooWAw1gTLCesw1bvTiKNYFyacwbAcjvKwfDsJiH8AuBFgFA&quot;): &quot;hello from B&quot;

hello from C
<span class="boring">}
</span></code></pre></pre>
<ul>
<li>çª—å£ Dï¼š</li>
</ul>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>hello from D
<span class="boring">}
</span></code></pre></pre>
</div>
</details>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ lobby ä¸‹çš„ A/B/C éƒ½æ”¶åˆ°äº†å„è‡ªçš„æ¶ˆæ¯ã€‚</p>
</blockquote>
<p>è¿™ä¸ªä½¿ç”¨ libp2p çš„èŠå¤©ä»£ç ï¼Œå¦‚æœä½ è¯»ä¸æ‡‚ï¼Œæ²¡å…³ç³»ã€‚</p>
<blockquote>
<p>P2P æœ‰å¤§é‡çš„æ–°çš„æ¦‚å¿µå’Œåè®®éœ€è¦é¢„å…ˆæŒæ¡ï¼Œæ‰€ä»¥å¦‚æœä½ å¯¹è¿™äº›æ¦‚å¿µå’Œåè®®æ„Ÿå…´è¶£ï¼Œå¯ä»¥è‡ªè¡Œé˜…è¯» <strong><a href="https://docs.rs/libp2p/latest/libp2p/">libp2p çš„æ–‡æ¡£</a></strong>
ï¼Œä»¥åŠå®ƒçš„**<a href="https://github.com/libp2p/rust-libp2p/tree/master/examples">ç¤ºä¾‹ä»£ç </a>**ã€‚</p>
</blockquote>
<h3 id="é€šè®¯æ¨¡å‹ç»ƒä¹ é¢˜"><a class="header" href="#é€šè®¯æ¨¡å‹ç»ƒä¹ é¢˜">é€šè®¯æ¨¡å‹ç»ƒä¹ é¢˜</a></h3>
<ol>
<li>çœ‹ä¸€çœ‹ libp2p çš„æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç ï¼ŒæŠŠ libp2p clone åˆ°æœ¬åœ°ï¼Œè¿è¡Œæ¯ä¸ªç¤ºä¾‹ä»£ç ã€‚</li>
<li>é˜…è¯» <a href="https://docs.rs/libp2p-swarm/0.30.0/src/libp2p_swarm/behaviour.rs.html#56-185"><strong>libp2p çš„ NetworkBehaviour
trait</strong></a>
ï¼Œä»¥åŠ <strong><a href="https://docs.rs/libp2p-floodsub/0.30.0/src/libp2p_floodsub/layer.rs.html#244-399">floodsub å¯¹åº”çš„å®ç°</a></strong>ã€‚</li>
<li>å°è¯•æŠŠ<a href="#P2P%E8%81%8A%E5%A4%A9%E5%BA%94%E7%94%A8">P2PèŠå¤©åº”ç”¨</a>ä¾‹å­ä¸­çš„ floodsub
æ›¿æ¢æˆ**<a href="https://docs.rs/libp2p/0.39.1/libp2p/gossipsub/struct.Gossipsub.html">æ›´é«˜æ•ˆæ›´èŠ‚çœå¸¦å®½çš„ gossipsub</a>**ã€‚</li>
</ol>

            </main>

            <!--            <script src="https://utteranc.es/client.js"-->
            <!--                    repo="RustMagazine/rust_magazine_2022"-->
            <!--                    issue-term="title"-->
            <!--                    theme="github-light"-->
            <!--                    crossorigin="anonymous"-->
            <!--                    async></script>-->

            <nav class="nav-wrapper" aria-label="Page navigation">
                <!-- Mobile navigation buttons -->
                    <a rel="prev" href="7_1_protocols.html" class="mobile-nav-chapters previous"
                       title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="kv_server_design.html" class="mobile-nav-chapters next"
                       title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>

                <div style="clear: both"></div>
            </nav>
        </div>
    </div>

    <nav class="nav-wide-wrapper" aria-label="Page navigation">
            <a rel="prev" href="7_1_protocols.html" class="nav-chapters previous" title="Previous chapter"
               aria-label="Previous chapter" aria-keyshortcuts="Left">
                <i class="fa fa-angle-left"></i>
            </a>

            <a rel="next" href="kv_server_design.html" class="nav-chapters next" title="Next chapter"
               aria-label="Next chapter" aria-keyshortcuts="Right">
                <i class="fa fa-angle-right"></i>
            </a>
    </nav>

</div>



    <script type="text/javascript">
        window.playground_line_numbers = true;
    </script>

    <script type="text/javascript">
        window.playground_copyable = true;
    </script>

    <script src="ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="editor.js" type="text/javascript" charset="utf-8"></script>
    <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
    <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
    <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

    <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

<script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
<script src="highlight.js" type="text/javascript" charset="utf-8"></script>
<script src="book.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JS scripts -->
    <script type="text/javascript" src="assets/mermaid/mermaid.min.js"></script>
    <script type="text/javascript" src="assets/mermaid/mermaid-init.js"></script>
    <script type="text/javascript" src="assets/smart-anchor.js"></script>
    <script type="text/javascript" src="assets/pagetoc/sidebar.js"></script>

</body>
</html>
