<!DOCTYPE HTML>
<html lang="cn" class="sidebar-visible no-js rust">
<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Rustå¦‚ä½•å¤„ç†é”™è¯¯ - Anatomy In First Rust Programming Class ğŸ¦€</title>


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="ä»¥rustç¼–ç¨‹ç¬¬ä¸€è¯¾çš„ä»£ç ä¸ºä¾‹è¿›è¡ŒåŸºç¡€ä»£ç åˆ†æ">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff"/>

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="md-favicon.png">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="highlight.css">
    <link rel="stylesheet" href="tomorrow-night.css">
    <link rel="stylesheet" href="ayu-highlight.css">

    <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="assets/pagetoc/pagetoc_style.css">
        <link rel="stylesheet" href="assets/css/mdbook-admonish.css">

        <!-- MathJax -->
        <script async type="text/javascript"
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<!-- Provide site root to javascript -->
<script type="text/javascript">
    var path_to_root = "";
    var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
</script>

<!-- Work around some values being stored in localStorage wrapped in quotes -->
<script type="text/javascript">
    try {
        var theme = localStorage.getItem('mdbook-theme');
        var sidebar = localStorage.getItem('mdbook-sidebar');

        if (theme.startsWith('"') && theme.endsWith('"')) {
            localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
        }

        if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
            localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
        }
    } catch (e) {
    }
</script>

<!-- Set the theme before any content is loaded, prevents flash -->
<script type="text/javascript">
    var theme;
    try {
        theme = localStorage.getItem('mdbook-theme');
    } catch (e) {
    }
    if (theme === null || theme === undefined) {
        theme = default_theme;
    }
    var html = document.querySelector('html');
    html.classList.remove('no-js')
    html.classList.remove('rust')
    html.classList.add(theme);
    html.classList.add('js');
</script>

<!-- Hide / unhide sidebar before it is displayed -->
<script type="text/javascript">
    var html = document.querySelector('html');
    var sidebar = 'hidden';
    if (document.body.clientWidth >= 1080) {
        try {
            sidebar = localStorage.getItem('mdbook-sidebar');
        } catch (e) {
        }
        sidebar = sidebar || 'visible';
    }
    html.classList.remove('sidebar-visible');
    html.classList.add("sidebar-" + sidebar);
</script>

<nav id="sidebar" class="sidebar" aria-label="Table of contents">
    <div class="sidebar-scrollbox">
        <ol class="chapter"><li class="chapter-item expanded "><a href="anatomy_logic.html"><strong aria-hidden="true">1.</strong> æºç é˜…è¯»é€»è¾‘</a></li><li class="chapter-item expanded "><a href="intro_gdb_lldb.html"><strong aria-hidden="true">2.</strong> gdb/lldbè°ƒè¯•æˆ–æŸ¥çœ‹å†…å­˜ç»“æ„</a></li><li class="chapter-item expanded "><a href="get_hands_dirty.html"><strong aria-hidden="true">3.</strong> get hands dirty</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="httpie.html"><strong aria-hidden="true">3.1.</strong> httpie</a></li><li class="chapter-item expanded "><a href="rgrep.html"><strong aria-hidden="true">3.2.</strong> rgrep</a></li><li class="chapter-item expanded "><a href="thumbor.html"><strong aria-hidden="true">3.3.</strong> thumbor</a></li><li class="chapter-item expanded "><a href="queryer.html"><strong aria-hidden="true">3.4.</strong> queryer</a></li></ol></li><li class="chapter-item expanded "><a href="rust_cores.html"><strong aria-hidden="true">4.</strong> Rustæ ¸å¿ƒæ·±å…¥</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1_stack_heap_ownership_lifetime_memory.html"><strong aria-hidden="true">4.1.</strong> I. ä»æ ˆå †ã€æ‰€æœ‰æƒã€ç”Ÿå‘½å‘¨æœŸå¼€å§‹å†…å­˜ç®¡ç†</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1_1_stack_heap.html"><strong aria-hidden="true">4.1.1.</strong> ä»å †æ ˆå¼€å§‹</a></li><li class="chapter-item expanded "><a href="1_2_programming_basic_concepts.html"><strong aria-hidden="true">4.1.2.</strong> å››å¤§ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ</a></li><li class="chapter-item expanded "><a href="1_3_ownership.html"><strong aria-hidden="true">4.1.3.</strong> æ‰€æœ‰æƒ</a></li><li class="chapter-item expanded "><a href="1_4_lifetime.html"><strong aria-hidden="true">4.1.4.</strong> ç”Ÿå‘½å‘¨æœŸ</a></li><li class="chapter-item expanded "><a href="1_5_go_through.html"><strong aria-hidden="true">4.1.5.</strong> ä»åˆ›å»ºåˆ°æ¶ˆäº¡</a></li></ol></li><li class="chapter-item expanded "><a href="2_type_system.html"><strong aria-hidden="true">4.2.</strong> II. ç±»å‹ç³»ç»Ÿ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="2_1_type_details.html"><strong aria-hidden="true">4.2.1.</strong> ç±»å‹ç³»ç»Ÿç‰¹ç‚¹</a></li><li class="chapter-item expanded "><a href="2_2_generic_overview.html"><strong aria-hidden="true">4.2.2.</strong> æ³›å‹æ¦‚è§ˆï¼šå°±åƒå‡½æ•°</a></li><li class="chapter-item expanded "><a href="2_3_trait_overview.html"><strong aria-hidden="true">4.2.3.</strong> traitæ¦‚è§ˆ</a></li><li class="chapter-item expanded "><a href="2_4_0_three_polymorphics.html"><strong aria-hidden="true">4.2.4.</strong> ä¸‰ç§å¤šæ€å½¢å¼</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="2_4_1_generic_usage.html"><strong aria-hidden="true">4.2.4.1.</strong> Generics</a></li><li class="chapter-item "><a href="2_4_2_trait_impl.html"><strong aria-hidden="true">4.2.4.2.</strong> Trait impl</a></li><li class="chapter-item "><a href="2_4_3_trait_object.html"><strong aria-hidden="true">4.2.4.3.</strong> Trait object</a></li></ol></li><li class="chapter-item expanded "><a href="2_5_trait_frequently.html"><strong aria-hidden="true">4.2.5.</strong> å¸¸ç”¨trait</a></li><li class="chapter-item expanded "><a href="2_6_trait_design.html"><strong aria-hidden="true">4.2.6.</strong> Traitè®¾è®¡</a></li></ol></li><li class="chapter-item expanded "><a href="3_data_structure.html"><strong aria-hidden="true">4.3.</strong> III. æ•°æ®ç»“æ„</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="3_1_smart_pointer.html"><strong aria-hidden="true">4.3.1.</strong> æ™ºèƒ½æŒ‡é’ˆ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="3_1_1_box.html"><strong aria-hidden="true">4.3.1.1.</strong> Box</a></li><li class="chapter-item "><a href="3_1_2_cow.html"><strong aria-hidden="true">4.3.1.2.</strong> Cow&lt;'a, B&gt;</a></li><li class="chapter-item "><a href="3_1_3_mutex_guard.html"><strong aria-hidden="true">4.3.1.3.</strong> MutexGuard&lt;'_, T&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="3_2_containers.html"><strong aria-hidden="true">4.3.2.</strong> é›†åˆå®¹å™¨</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="3_2_1_slice.html"><strong aria-hidden="true">4.3.2.1.</strong> åˆ‡ç‰‡</a></li><li class="chapter-item "><a href="3_2_2_hashmap.html"><strong aria-hidden="true">4.3.2.2.</strong> å“ˆå¸Œè¡¨</a></li></ol></li><li class="chapter-item expanded "><a href="3_3_error_handling.html"><strong aria-hidden="true">4.3.3.</strong> é”™è¯¯å¤„ç†</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="3_3_1_error_content.html"><strong aria-hidden="true">4.3.3.1.</strong> é”™è¯¯å¤„ç†å†…å®¹å’Œä¸»æµæ–¹æ³•</a></li><li class="chapter-item expanded "><a href="3_3_2_rust_error_handling.html" class="active"><strong aria-hidden="true">4.3.3.2.</strong> Rustå¦‚ä½•å¤„ç†é”™è¯¯</a></li></ol></li><li class="chapter-item expanded "><a href="3_4_closure.html"><strong aria-hidden="true">4.3.4.</strong> é—­åŒ…</a></li></ol></li><li class="chapter-item expanded "><a href="4_macros.html"><strong aria-hidden="true">4.4.</strong> IV. å®ç¼–ç¨‹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="4_1_macros_classify.html"><strong aria-hidden="true">4.4.1.</strong> å®åˆ†ç±»</a></li><li class="chapter-item expanded "><a href="4_2_declarative_macros.html"><strong aria-hidden="true">4.4.2.</strong> å£°æ˜å®</a></li><li class="chapter-item expanded "><a href="4_3_procedural_macros.html"><strong aria-hidden="true">4.4.3.</strong> è¿‡ç¨‹å®</a></li></ol></li><li class="chapter-item expanded "><a href="5_concurrency_async.html"><strong aria-hidden="true">4.5.</strong> V. å¹¶å‘ä¸å¼‚æ­¥</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="5_1_concurrency_primitives.html"><strong aria-hidden="true">4.5.1.</strong> å¹¶å‘åŸè¯­(Concurrency Primitives)</a></li><li class="chapter-item expanded "><a href="5_2_future_async_await.html"><strong aria-hidden="true">4.5.2.</strong> å¼‚æ­¥ï¼šFuture/Async/Await</a></li><li class="chapter-item expanded "><a href="5_3_deepin_async_await.html"><strong aria-hidden="true">4.5.3.</strong> æ·±å…¥async/await</a></li></ol></li><li class="chapter-item expanded "><a href="6_unsafe_ffi.html"><strong aria-hidden="true">4.6.</strong> VI. æ··åˆç¼–ç¨‹</a></li></ol></li><li class="chapter-item expanded "><a href="kv_server_design.html"><strong aria-hidden="true">5.</strong> kv serverè®¾è®¡ä¸å®ç°</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="kv1_basic.html"><strong aria-hidden="true">5.1.</strong> åŸºæœ¬æµç¨‹</a></li><li class="chapter-item expanded "><a href="kv2_protocols.html"><strong aria-hidden="true">5.2.</strong> å®ç°å¹¶éªŒè¯åè®®å±‚</a></li><li class="chapter-item expanded "><a href="kv3_advanced_traits.html"><strong aria-hidden="true">5.3.</strong> é«˜çº§traitæ”¹é€ </a></li><li class="chapter-item expanded "><a href="kv4_network.html"><strong aria-hidden="true">5.4.</strong> ç½‘ç»œå¤„ç†</a></li><li class="chapter-item expanded "><a href="kv5_network_security.html"><strong aria-hidden="true">5.5.</strong> ç½‘ç»œå®‰å…¨</a></li><li class="chapter-item expanded "><a href="kv6_async_refactor.html"><strong aria-hidden="true">5.6.</strong> å¼‚æ­¥æ”¹é€ </a></li><li class="chapter-item expanded "><a href="kv7_big_refactor.html"><strong aria-hidden="true">5.7.</strong> é‡å¤§é‡æ„</a></li><li class="chapter-item expanded "><a href="kv8_config_ci_cd.html"><strong aria-hidden="true">5.8.</strong> é…ç½®ã€æµ‹è¯•ã€ç›‘æ§ã€CI/CD</a></li></ol></li><li class="chapter-item expanded "><a href="custom_axum_async_web_framework.html"><strong aria-hidden="true">6.</strong> æ„å»ºè‡ªå·±çš„ç±»axumå¼‚æ­¥Webæ¡†æ¶</a></li><li class="chapter-item expanded affix "><a href="checklist.html">Checklist</a></li></ol>
    </div>
    <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
</nav>

<div id="page-wrapper" class="page-wrapper">

    <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
        <div id="menu-bar" class="menu-bar sticky bordered">
            <div class="left-buttons">
                <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                    <i class="fa fa-bars"></i>
                </button>
                <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                    <i class="fa fa-paint-brush"></i>
                </button>
                <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                    <li role="none">
                        <button role="menuitem" class="theme" id="light">Light</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="rust">Rust (default)</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="coal">Coal</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="navy">Navy</button>
                    </li>
                    <li role="none">
                        <button role="menuitem" class="theme" id="ayu">Ayu</button>
                    </li>
                </ul>
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                            aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                            aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
            </div>

            <h1 class="menu-title">Anatomy In First Rust Programming Class ğŸ¦€</h1>
            <h4 class="menu-bar"><a href="https://kuanhsiaokuo.github.io/think-tool-kit/">ä¿æŒæ‰¹åˆ¤ï¼Œæœ‰æ‰€å–èˆï¼ŒçŸ¥è¡Œåˆä¸€, æ–¹è§çœŸæˆ‘</a> -- ç»ƒæ­¦ä¸ç»ƒåŠŸ
                åˆ°å¤´ä¸€åœºç©º -- ã€Šèµ›åšè‹±é›„ä¼ ã€‹ </h4>
            <div class="right-buttons">
                    <a href="print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    <a href="https://github.com/KuanHsiaoKuo/geektime-tyr-rust.git" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-rust"></i>
                    </a>
            </div>
        </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" name="search" id="searchbar" name="searchbar"
                           placeholder="Search this book ..." aria-controls="searchresults-outer"
                           aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

        <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
        <script type="text/javascript">
            document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
            document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
            Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
            });
        </script>

        <div id="content" class="content">
            <main>

                <!-- Page table of contents -->
                <div class="sidetoc">
                    <nav class="pagetoc"></nav>
                </div>
                <h1 id="rust-çš„é”™è¯¯å¤„ç†"><a class="header" href="#rust-çš„é”™è¯¯å¤„ç†">Rust çš„é”™è¯¯å¤„ç†</a></h1>
<!--ts-->
<ul>
<li><a href="#rust-%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">Rust çš„é”™è¯¯å¤„ç†</a>
<ul>
<li><a href="#1-%E4%BD%BF%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E6%9D%A5%E6%9E%84%E5%BB%BA%E4%B8%BB%E8%A6%81%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8Boptionresult%E9%94%99%E8%AF%AF%E7%B1%BB%E5%9E%8B%E5%A4%84%E7%90%86">1. ä½¿ç”¨ç±»å‹ç³»ç»Ÿæ¥æ„å»ºä¸»è¦çš„é”™è¯¯å¤„ç†æµç¨‹ï¼šOption/Resulté”™è¯¯ç±»å‹å¤„ç†</a>
<ul>
<li><a href="#option">Option</a></li>
<li><a href="#result">Result</a></li>
</ul>
</li>
<li><a href="#2-%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8panic-%E5%92%8C-catch_unwind">2. æŠ›å‡ºå¼‚å¸¸ï¼španic! å’Œ catch_unwind</a>
<ul>
<li><a href="#panic%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8-%E4%B8%8D%E5%8F%AF%E4%B8%8D%E6%83%B3%E6%81%A2%E5%A4%8D">panic!æŠ›å‡ºå¼‚å¸¸: ä¸å¯/ä¸æƒ³æ¢å¤</a></li>
<li><a href="#catch_uwind%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8%E5%B4%A9%E6%BA%83%E5%90%8E%E6%81%A2%E5%A4%8D%E4%B8%8A%E4%B8%8B%E6%96%87">catch_uwindæ•è·å¼‚å¸¸ï¼šå´©æºƒåæ¢å¤ä¸Šä¸‹æ–‡</a></li>
</ul>
</li>
<li><a href="#3-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E7%B1%BB%E5%9E%8B">3. è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹</a>
<ul>
<li><a href="#31-%E4%BD%BF%E7%94%A8error-trait">3.1 ä½¿ç”¨Error trait</a></li>
<li><a href="#32-%E4%BD%BF%E7%94%A8thiserror%E7%AE%80%E5%8C%96">3.2 ä½¿ç”¨thiserrorç®€åŒ–</a></li>
<li><a href="#33-%E4%BD%BF%E7%94%A8anyhow%E6%89%A9%E5%B1%95%E6%93%8D%E4%BD%9C%E7%AC%A6">3.3 ä½¿ç”¨anyhowæ‰©å±•ï¼Ÿæ“ä½œç¬¦</a></li>
<li><a href="#34-%E8%AE%A9%E9%94%99%E8%AF%AF%E6%97%A0%E6%89%80%E9%81%81%E5%BD%A2">3.4 è®©é”™è¯¯æ— æ‰€éå½¢</a></li>
</ul>
</li>
<li><a href="#4-%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8">4. æ•è·å¼‚å¸¸</a>
<ul>
<li><a href="#41-%E6%93%8D%E4%BD%9C%E7%AC%A6">4.1 ?æ“ä½œç¬¦</a></li>
<li><a href="#42-%E5%87%BD%E6%95%B0%E5%BC%8F%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86-mapmap_errand_then">4.2 å‡½æ•°å¼é”™è¯¯å¤„ç†: map/map_err/and_then</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- Created by https://github.com/ekalinin/github-markdown-toc -->
<!-- Added by: runner, at: Fri Oct 21 11:58:32 UTC 2022 -->
<!--te-->
<h2 id="1-ä½¿ç”¨ç±»å‹ç³»ç»Ÿæ¥æ„å»ºä¸»è¦çš„é”™è¯¯å¤„ç†æµç¨‹optionresulté”™è¯¯ç±»å‹å¤„ç†"><a class="header" href="#1-ä½¿ç”¨ç±»å‹ç³»ç»Ÿæ¥æ„å»ºä¸»è¦çš„é”™è¯¯å¤„ç†æµç¨‹optionresulté”™è¯¯ç±»å‹å¤„ç†">1. ä½¿ç”¨ç±»å‹ç³»ç»Ÿæ¥æ„å»ºä¸»è¦çš„é”™è¯¯å¤„ç†æµç¨‹ï¼šOption/Resulté”™è¯¯ç±»å‹å¤„ç†</a></h2>
<blockquote>
<p>ç”±äºè¯ç”Ÿçš„å¹´ä»£æ¯”è¾ƒæ™šï¼ŒRust æœ‰æœºä¼šä»å·²æœ‰çš„è¯­è¨€ä¸­å­¦ä¹ åˆ°å„ç§é”™è¯¯å¤„ç†çš„ä¼˜åŠ£ã€‚å¯¹äº Rust æ¥è¯´ï¼Œç›®å‰çš„å‡ ç§æ–¹å¼ç›¸æ¯”è€Œè¨€ï¼Œæœ€ä½³çš„æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ç±»å‹ç³»ç»Ÿæ¥æ„å»ºä¸»è¦çš„é”™è¯¯å¤„ç†æµç¨‹ã€‚</p>
</blockquote>
<details id="admonition-rust-å·å¸ˆ-haskellæ„å»ºäº†å¯¹æ ‡-maybe-çš„-option-ç±»å‹å’Œ-å¯¹æ ‡-either-çš„-result-ç±»å‹" class="admonition info">
<summary class="admonition-title">
<p>Rust å·å¸ˆ Haskellï¼Œæ„å»ºäº†å¯¹æ ‡ Maybe çš„ Option ç±»å‹å’Œ å¯¹æ ‡ Either çš„ Result ç±»å‹</p>
<p><a class="admonition-anchor-link" href="#admonition-rust-å·å¸ˆ-haskellæ„å»ºäº†å¯¹æ ‡-maybe-çš„-option-ç±»å‹å’Œ-å¯¹æ ‡-either-çš„-result-ç±»å‹"></a></p>
</summary>
<div>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/18%EF%BD%9C%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88Rust%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%8E%E4%BC%97%E4%B8%8D%E5%90%8C%EF%BC%9F-4895260.jpg" alt="18ï½œé”™è¯¯å¤„ç†ï¼šä¸ºä»€ä¹ˆRustçš„é”™è¯¯å¤„ç†ä¸ä¼—ä¸åŒï¼Ÿ" /></p>
</div>
</details>
<h3 id="option"><a class="header" href="#option">Option</a></h3>
<details id="admonition-option-æ˜¯ä¸€ä¸ª-enumå…¶å®šä¹‰å¦‚ä¸‹" class="admonition info">
<summary class="admonition-title">
<p>Option æ˜¯ä¸€ä¸ª enumï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p><a class="admonition-anchor-link" href="#admonition-option-æ˜¯ä¸€ä¸ª-enumå…¶å®šä¹‰å¦‚ä¸‹"></a></p>
</summary>
<div>
<pre><pre class="playground"><code class="language-rust  editable">
pub enum Option&lt;T&gt; {
    None,
    Some(T),
}
</code></pre></pre>
<blockquote>
<p>å®ƒå¯ä»¥æ‰¿è½½æœ‰å€¼ / æ— å€¼è¿™ç§æœ€ç®€å•çš„é”™è¯¯ç±»å‹ã€‚</p>
</blockquote>
</div>
</details>
<h3 id="result"><a class="header" href="#result">Result</a></h3>
<details id="admonition-result-æ˜¯ä¸€ä¸ªæ›´åŠ å¤æ‚çš„-enumå…¶å®šä¹‰å¦‚ä¸‹" class="admonition info">
<summary class="admonition-title">
<p>Result æ˜¯ä¸€ä¸ªæ›´åŠ å¤æ‚çš„ enumï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p><a class="admonition-anchor-link" href="#admonition-result-æ˜¯ä¸€ä¸ªæ›´åŠ å¤æ‚çš„-enumå…¶å®šä¹‰å¦‚ä¸‹"></a></p>
</summary>
<div>
<pre><pre class="playground"><code class="language-rust  editable">
#[must_use = &quot;this `Result` may be an `Err` variant, which should be handled&quot;]
pub enum Result&lt;T, E&gt; {
    Ok(T),
    Err(E),
}
</code></pre></pre>
<blockquote>
<p>å½“å‡½æ•°å‡ºé”™æ—¶ï¼Œå¯ä»¥è¿”å› Err(E)ï¼Œå¦åˆ™ Ok(T)ã€‚</p>
</blockquote>
</div>
</details>
<details id="admonition-result-ç±»å‹å£°æ˜æ—¶è¿˜æœ‰ä¸ª-must_use-çš„æ ‡æ³¨" class="admonition info">
<summary class="admonition-title">
<p>Result ç±»å‹å£°æ˜æ—¶è¿˜æœ‰ä¸ª must_use çš„æ ‡æ³¨</p>
<p><a class="admonition-anchor-link" href="#admonition-result-ç±»å‹å£°æ˜æ—¶è¿˜æœ‰ä¸ª-must_use-çš„æ ‡æ³¨"></a></p>
</summary>
<div>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒResult ç±»å‹å£°æ˜æ—¶è¿˜æœ‰ä¸ª must_use çš„æ ‡æ³¨</p>
<blockquote>
<p>ç¼–è¯‘å™¨ä¼šå¯¹æœ‰ must_use æ ‡æ³¨çš„æ‰€æœ‰ç±»å‹åšç‰¹æ®Šå¤„ç†ï¼š</p>
</blockquote>
<p>å¦‚æœè¯¥ç±»å‹å¯¹åº”çš„å€¼æ²¡æœ‰è¢«æ˜¾å¼ä½¿ç”¨ï¼Œåˆ™ä¼šå‘Šè­¦ã€‚è¿™æ ·ï¼Œä¿è¯é”™è¯¯è¢«å¦¥å–„å¤„ç†ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/e2100e3f17a9587c4d4bf50523c10653.png" alt="img" /></p>
<p>è¿™é‡Œï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨ read_file å‡½æ•°æ—¶ï¼Œç›´æ¥ä¸¢å¼ƒè¿”å›å€¼ï¼Œç”±äº #[must_use] çš„æ ‡æ³¨ï¼ŒRust ç¼–è¯‘å™¨æŠ¥è­¦ï¼Œè¦æ±‚æˆ‘ä»¬ä½¿ç”¨å…¶è¿”å›å€¼ã€‚</p>
</div>
</details>
<h2 id="2-æŠ›å‡ºå¼‚å¸¸panic-å’Œ-catch_unwind"><a class="header" href="#2-æŠ›å‡ºå¼‚å¸¸panic-å’Œ-catch_unwind">2. æŠ›å‡ºå¼‚å¸¸ï¼španic! å’Œ catch_unwind</a></h2>
<h3 id="panicæŠ›å‡ºå¼‚å¸¸-ä¸å¯ä¸æƒ³æ¢å¤"><a class="header" href="#panicæŠ›å‡ºå¼‚å¸¸-ä¸å¯ä¸æƒ³æ¢å¤">panic!æŠ›å‡ºå¼‚å¸¸: ä¸å¯/ä¸æƒ³æ¢å¤</a></h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/ch09-03-to-panic-or-not-to-panic.html">To panic! or Not to panic! - The Rust Programming Language</a></li>
</ul>
<blockquote>
<p>ä½¿ç”¨ Option å’Œ Result æ˜¯ Rust ä¸­å¤„ç†é”™è¯¯çš„é¦–é€‰ï¼Œç»å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬ä¹Ÿåº”è¯¥ä½¿ç”¨ï¼Œä½† Rust ä¹Ÿæä¾›äº†ç‰¹æ®Šçš„å¼‚å¸¸å¤„ç†èƒ½åŠ›ã€‚</p>
</blockquote>
<blockquote>
<p>åœ¨ Rust çœ‹æ¥ï¼Œä¸€æ—¦ä½ éœ€è¦æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£æŠ›å‡ºçš„ä¸€å®šæ˜¯ä¸¥é‡çš„é”™è¯¯ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼ŒRust è·Ÿ Golang ä¸€æ ·ï¼Œä½¿ç”¨äº†è¯¸å¦‚ panic! è¿™æ ·çš„å­—çœ¼è­¦ç¤ºå¼€å‘è€…ï¼šæƒ³æ¸…æ¥šäº†å†ä½¿ç”¨æˆ‘ã€‚</p>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œpanic! æ˜¯ä¸å¯æ¢å¤æˆ–è€…ä¸æƒ³æ¢å¤çš„é”™è¯¯ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ­¤åˆ»ï¼Œç¨‹åºç»ˆæ­¢è¿è¡Œå¹¶å¾—åˆ°å´©æºƒä¿¡æ¯ã€‚</p>
<details id="admonition-unwarp-æˆ–è€…-expectå°±æ˜¯å‡†å¤‡panic" class="admonition info">
<summary class="admonition-title">
<p>unwarp() æˆ–è€… expect()å°±æ˜¯å‡†å¤‡panic!</p>
<p><a class="admonition-anchor-link" href="#admonition-unwarp-æˆ–è€…-expectå°±æ˜¯å‡†å¤‡panic"></a></p>
</summary>
<div>
<p>åœ¨ä½¿ç”¨ Option å’Œ Result ç±»å‹æ—¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥å¯¹å…¶ unwarp() æˆ–è€… expect()ï¼Œå¼ºåˆ¶æŠŠ Option<T> å’Œ Result&lt;T, E&gt; è½¬æ¢æˆ Tï¼Œå¦‚æœæ— æ³•å®Œæˆè¿™ç§è½¬æ¢ï¼Œä¹Ÿä¼š panic! å‡ºæ¥ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼Œå®ƒè§£æ<a href="https://noiseprotocol.org/noise.html#protocol-names-and-modifiers"> noise protocol</a>çš„åè®®å˜é‡ï¼š</p>
<pre><pre class="playground"><code class="language-rust  editable">
let params: NoiseParams = &quot;Noise_XX_25519_AESGCM_SHA256&quot;.parse().unwrap();
</code></pre></pre>
</div>
</details>
<blockquote>
<p>å¦‚æœå¼€å‘è€…ä¸å°å¿ƒæŠŠåè®®å˜é‡å†™é”™äº†ï¼Œæœ€ä½³çš„æ–¹å¼æ˜¯ç«‹åˆ» panic! å‡ºæ¥ï¼Œè®©é”™è¯¯ç«‹åˆ»æš´éœ²ï¼Œä»¥ä¾¿è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
<h3 id="catch_uwindæ•è·å¼‚å¸¸å´©æºƒåæ¢å¤ä¸Šä¸‹æ–‡"><a class="header" href="#catch_uwindæ•è·å¼‚å¸¸å´©æºƒåæ¢å¤ä¸Šä¸‹æ–‡">catch_uwindæ•è·å¼‚å¸¸ï¼šå´©æºƒåæ¢å¤ä¸Šä¸‹æ–‡</a></h3>
<details id="admonition-catch_unwind-æœ‰äº›åœºæ™¯ä¸‹æˆ‘ä»¬ä¹Ÿå¸Œæœ›èƒ½å¤Ÿåƒå¼‚å¸¸å¤„ç†é‚£æ ·èƒ½å¤Ÿæ ˆå›æº¯æŠŠç¯å¢ƒæ¢å¤åˆ°æ•è·å¼‚å¸¸çš„ä¸Šä¸‹æ–‡" class="admonition info">
<summary class="admonition-title">
<p>catch_unwind(): æœ‰äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›èƒ½å¤Ÿåƒå¼‚å¸¸å¤„ç†é‚£æ ·èƒ½å¤Ÿæ ˆå›æº¯ï¼ŒæŠŠç¯å¢ƒæ¢å¤åˆ°æ•è·å¼‚å¸¸çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p><a class="admonition-anchor-link" href="#admonition-catch_unwind-æœ‰äº›åœºæ™¯ä¸‹æˆ‘ä»¬ä¹Ÿå¸Œæœ›èƒ½å¤Ÿåƒå¼‚å¸¸å¤„ç†é‚£æ ·èƒ½å¤Ÿæ ˆå›æº¯æŠŠç¯å¢ƒæ¢å¤åˆ°æ•è·å¼‚å¸¸çš„ä¸Šä¸‹æ–‡"></a></p>
</summary>
<div>
<p>Rust æ ‡å‡†åº“ä¸‹æä¾›äº† catch_unwind() ï¼ŒæŠŠè°ƒç”¨æ ˆå›æº¯åˆ° catch_unwind è¿™ä¸€åˆ»ï¼Œä½œç”¨å’Œå…¶å®ƒè¯­è¨€çš„ try {â€¦} catch {â€¦} ä¸€æ ·ã€‚è§å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><pre class="playground"><code class="language-rust  editable">
use std::panic;

fn main() {
    let result = panic::catch_unwind(|| {
        println!(&quot;hello!&quot;);
    });
    assert!(result.is_ok());
    let result = panic::catch_unwind(|| {
        panic!(&quot;oh no!&quot;);
    });
    assert!(result.is_err());
    println!(&quot;panic captured: {:#?}&quot;, result);
}
</code></pre></pre>
</div>
</details>
<blockquote>
<p>å½“ç„¶ï¼Œå’Œå¼‚å¸¸å¤„ç†ä¸€æ ·ï¼Œå¹¶ä¸æ„å‘³ç€ä½ å¯ä»¥æ»¥ç”¨è¿™ä¸€ç‰¹æ€§.
æˆ‘æƒ³è¿™ä¹Ÿæ˜¯ Rust æŠŠæŠ›å‡ºå¼‚å¸¸ç§°ä½œ panic! ï¼Œè€Œæ•è·å¼‚å¸¸ç§°ä½œ catch_unwind çš„åŸå› :è®©åˆå­¦è€…æœ›è€Œç”Ÿç•ï¼Œä¸æ•¢è½»æ˜“ä½¿ç”¨ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„ç”¨æˆ·ä½“éªŒã€‚</p>
</blockquote>
<details id="admonition-catch_unwind-åœ¨å“ªäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨" class="admonition question">
<summary class="admonition-title">
<p>catch_unwind åœ¨å“ªäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨:</p>
<p><a class="admonition-anchor-link" href="#admonition-catch_unwind-åœ¨å“ªäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨"></a></p>
</summary>
<div>
<p>catch_unwind åœ¨æŸäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨:</p>
<ol>
<li>
<p>æ¯”å¦‚ä½ åœ¨ä½¿ç”¨ Rust ä¸º erlang VM æ’°å†™ NIFï¼Œä½ ä¸å¸Œæœ› Rust ä»£ç ä¸­çš„ä»»ä½• panic! å¯¼è‡´ erlang VM å´©æºƒã€‚
å› ä¸ºå´©æºƒæ˜¯ä¸€ä¸ªéå¸¸ä¸å¥½çš„ä½“éªŒï¼Œå®ƒè¿èƒŒäº† erlang çš„è®¾è®¡åŸåˆ™ï¼šprocess å¯ä»¥ let it crashï¼Œä½†é”™è¯¯ä»£ç ä¸è¯¥å¯¼è‡´ VM å´©æºƒã€‚</p>
</li>
<li>
<p>æ­¤åˆ»ï¼Œä½ å°±å¯ä»¥æŠŠ Rust ä»£ç æ•´ä¸ªå°è£…åœ¨ catch_unwind() å‡½æ•°æ‰€éœ€è¦ä¼ å…¥çš„é—­åŒ…ä¸­ã€‚
è¿™æ ·ï¼Œä¸€æ—¦ä»»ä½•ä»£ç ä¸­ï¼ŒåŒ…æ‹¬ç¬¬ä¸‰æ–¹ crates çš„ä»£ç ï¼Œå«æœ‰èƒ½å¤Ÿå¯¼è‡´ panic! çš„ä»£ç ï¼Œéƒ½ä¼šè¢«æ•è·ï¼Œå¹¶è¢«è½¬æ¢ä¸ºä¸€ä¸ª Resultã€‚</p>
</li>
</ol>
</div>
</details>
<h2 id="3-è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹"><a class="header" href="#3-è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹">3. è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹</a></h2>
<h3 id="31-ä½¿ç”¨error-trait"><a class="header" href="#31-ä½¿ç”¨error-trait">3.1 ä½¿ç”¨Error trait</a></h3>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„æ•°æ®ç±»å‹ï¼Œç„¶åä¸ºå…¶å®ç° Error traitã€‚</p>
</blockquote>
<details id="admonition-ä½¿ç”¨error-traitè‡ªå®šä¹‰é”™è¯¯ç±»å‹" class="admonition info">
<summary class="admonition-title">
<p>ä½¿ç”¨Error traitè‡ªå®šä¹‰é”™è¯¯ç±»å‹</p>
<p><a class="admonition-anchor-link" href="#admonition-ä½¿ç”¨error-traitè‡ªå®šä¹‰é”™è¯¯ç±»å‹"></a></p>
</summary>
<div>
<p>ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬è®²åˆ° Result&lt;T, E&gt; é‡Œ E æ˜¯ä¸€ä¸ªä»£è¡¨é”™è¯¯çš„æ•°æ®ç±»å‹ã€‚ä¸ºäº†è§„èŒƒè¿™ä¸ªä»£è¡¨é”™è¯¯çš„æ•°æ®ç±»å‹çš„è¡Œä¸ºï¼ŒRust å®šä¹‰äº† Error traitï¼š</p>
<pre><pre class="playground"><code class="language-rust  editable">
pub trait Error: Debug + Display {
    fn source(&amp;self) -&gt; Option&lt;&amp;(dyn Error + 'static)&gt; { ... }
    fn backtrace(&amp;self) -&gt; Option&lt;&amp;Backtrace&gt; { ... }
    fn description(&amp;self) -&gt; &amp;str { ... }
    fn cause(&amp;self) -&gt; Option&lt;&amp;dyn Error&gt; { ... }
}
</code></pre></pre>
</div>
</details>
<h3 id="32-ä½¿ç”¨thiserrorç®€åŒ–"><a class="header" href="#32-ä½¿ç”¨thiserrorç®€åŒ–">3.2 ä½¿ç”¨thiserrorç®€åŒ–</a></h3>
<blockquote>
<p>ä¸è¿‡ï¼Œè¿™æ ·çš„å·¥ä½œå·²ç»æœ‰äººæ›¿æˆ‘ä»¬ç®€åŒ–äº†ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ thiserrorå’Œ anyhowæ¥ç®€åŒ–è¿™ä¸ªæ­¥éª¤ã€‚</p>
</blockquote>
<details id="admonition-thiserror-æä¾›äº†ä¸€ä¸ªæ´¾ç”Ÿå®derive-macroæ¥ç®€åŒ–é”™è¯¯ç±»å‹çš„å®šä¹‰" class="admonition info">
<summary class="admonition-title">
<p>thiserror æä¾›äº†ä¸€ä¸ªæ´¾ç”Ÿå®ï¼ˆderive macroï¼‰æ¥ç®€åŒ–é”™è¯¯ç±»å‹çš„å®šä¹‰</p>
<p><a class="admonition-anchor-link" href="#admonition-thiserror-æä¾›äº†ä¸€ä¸ªæ´¾ç”Ÿå®derive-macroæ¥ç®€åŒ–é”™è¯¯ç±»å‹çš„å®šä¹‰"></a></p>
</summary>
<div>
<pre><pre class="playground"><code class="language-rust  editable">
use thiserror::Error;
#[derive(Error, Debug)]
#[non_exhaustive]
pub enum DataStoreError {
    #[error(&quot;data store disconnected&quot;)]
    Disconnect(#[from] io::Error),
    #[error(&quot;the data for key `{0}` is not available&quot;)]
    Redaction(String),
    #[error(&quot;invalid header (expected {expected:?}, found {found:?})&quot;)]
    InvalidHeader {
        expected: String,
        found: String,
    },
    #[error(&quot;unknown data store error&quot;)]
    Unknown,
}
</code></pre></pre>
</div>
</details>
<p>å¦‚æœä½ åœ¨æ’°å†™ä¸€ä¸ª Rust åº“ï¼Œé‚£ä¹ˆ thiserror å¯ä»¥å¾ˆå¥½åœ°ååŠ©ä½ å¯¹è¿™ä¸ªåº“é‡Œæ‰€æœ‰å¯èƒ½å‘ç”Ÿçš„é”™è¯¯è¿›è¡Œå»ºæ¨¡ã€‚</p>
<h3 id="33-ä½¿ç”¨anyhowæ‰©å±•æ“ä½œç¬¦"><a class="header" href="#33-ä½¿ç”¨anyhowæ‰©å±•æ“ä½œç¬¦">3.3 ä½¿ç”¨anyhowæ‰©å±•ï¼Ÿæ“ä½œç¬¦</a></h3>
<ol>
<li>anyhow å®ç°äº† anyhow::Error å’Œä»»æ„ç¬¦åˆ Error trait çš„é”™è¯¯ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œè®©ä½ å¯ä»¥ä½¿ç”¨ ? æ“ä½œç¬¦ï¼Œä¸å¿…å†æ‰‹å·¥è½¬æ¢é”™è¯¯ç±»å‹ã€‚</li>
<li>anyhow è¿˜å¯ä»¥è®©ä½ å¾ˆå®¹æ˜“åœ°æŠ›å‡ºä¸€äº›ä¸´æ—¶çš„é”™è¯¯ï¼Œè€Œä¸å¿…è´¹åŠ›å®šä¹‰é”™è¯¯ç±»å‹ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ä¸æå€¡æ»¥ç”¨è¿™ä¸ªèƒ½åŠ›ã€‚</li>
</ol>
<h3 id="34-è®©é”™è¯¯æ— æ‰€éå½¢"><a class="header" href="#34-è®©é”™è¯¯æ— æ‰€éå½¢">3.4 è®©é”™è¯¯æ— æ‰€éå½¢</a></h3>
<blockquote>
<p>ä½œä¸ºä¸€åä¸¥è‚ƒçš„å¼€å‘è€…ï¼Œæˆ‘éå¸¸å»ºè®®ä½ åœ¨å¼€å‘å‰:</p>
</blockquote>
<ul>
<li>å…ˆç”¨ç±»ä¼¼ thiserror çš„åº“å®šä¹‰å¥½ä½ é¡¹ç›®ä¸­ä¸»è¦çš„é”™è¯¯ç±»å‹</li>
<li>å¹¶éšç€é¡¹ç›®çš„æ·±å…¥ï¼Œä¸æ–­å¢åŠ æ–°çš„é”™è¯¯ç±»å‹ï¼Œè®©ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ½œåœ¨é”™è¯¯éƒ½æ— æ‰€éå½¢ã€‚</li>
</ul>
<h2 id="4-æ•è·å¼‚å¸¸"><a class="header" href="#4-æ•è·å¼‚å¸¸">4. æ•è·å¼‚å¸¸</a></h2>
<h3 id="41-æ“ä½œç¬¦"><a class="header" href="#41-æ“ä½œç¬¦">4.1 ?æ“ä½œç¬¦</a></h3>
<details id="admonition--æ“ä½œç¬¦çš„ç”±æ¥" class="admonition info">
<summary class="admonition-title">
<p>? æ“ä½œç¬¦çš„ç”±æ¥</p>
<p><a class="admonition-anchor-link" href="#admonition--æ“ä½œç¬¦çš„ç”±æ¥"></a></p>
</summary>
<div>
<p>è¿™è™½ç„¶å¯ä»¥æå¤§é¿å…é—å¿˜é”™è¯¯çš„æ˜¾ç¤ºå¤„ç†ï¼Œä½†å¦‚æœæˆ‘ä»¬å¹¶ä¸å…³å¿ƒé”™è¯¯ï¼Œåªéœ€è¦ä¼ é€’é”™è¯¯ï¼Œè¿˜æ˜¯ä¼šå†™å‡ºåƒ C æˆ–è€… Golang ä¸€æ ·æ¯”è¾ƒå†—ä½™çš„ä»£ç ã€‚æ€ä¹ˆåŠï¼Ÿ</p>
<p>å¥½åœ¨ Rust é™¤äº†æœ‰å¼ºå¤§çš„ç±»å‹ç³»ç»Ÿå¤–ï¼Œè¿˜å…·å¤‡å…ƒç¼–ç¨‹çš„èƒ½åŠ›ï¼š</p>
<ul>
<li>æ—©æœŸ Rust æä¾›äº† try! å®æ¥ç®€åŒ–é”™è¯¯çš„æ˜¾å¼å¤„ç†</li>
<li>åæ¥ä¸ºäº†è¿›ä¸€æ­¥æå‡ç”¨æˆ·ä½“éªŒï¼Œtry! è¢«è¿›åŒ–æˆ ? æ“ä½œç¬¦ã€‚</li>
</ul>
</div>
</details>
<details id="admonition-å¦‚æœä½ åªæƒ³ä¼ æ’­é”™è¯¯ä¸æƒ³å°±åœ°å¤„ç†å¯ä»¥ç”¨--æ“ä½œç¬¦" class="admonition info">
<summary class="admonition-title">
<p>å¦‚æœä½ åªæƒ³ä¼ æ’­é”™è¯¯ï¼Œä¸æƒ³å°±åœ°å¤„ç†ï¼Œå¯ä»¥ç”¨ ? æ“ä½œç¬¦</p>
<p><a class="admonition-anchor-link" href="#admonition-å¦‚æœä½ åªæƒ³ä¼ æ’­é”™è¯¯ä¸æƒ³å°±åœ°å¤„ç†å¯ä»¥ç”¨--æ“ä½œç¬¦"></a></p>
</summary>
<div>
<p>æ‰€ä»¥åœ¨ Rust ä»£ç ä¸­ï¼Œå¦‚æœä½ åªæƒ³ä¼ æ’­é”™è¯¯ï¼Œä¸æƒ³å°±åœ°å¤„ç†ï¼Œå¯ä»¥ç”¨ ? æ“ä½œç¬¦ï¼Œæ¯”å¦‚ï¼ˆä»£ç ï¼‰:</p>
<pre><pre class="playground"><code class="language-rust  editable">
use std::fs::File;
use std::io::Read;

fn read_file(name: &amp;str) -&gt; Result&lt;String, std::io::Error&gt; {
  let mut f = File::open(name)?;
  let mut contents = String::new();
  f.read_to_string(&amp;mut contents)?;
  Ok(contents)
}
</code></pre></pre>
</div>
</details>
<blockquote>
<p>é€šè¿‡ ? æ“ä½œç¬¦ï¼ŒRust è®©é”™è¯¯ä¼ æ’­çš„ä»£ä»·å’Œå¼‚å¸¸å¤„ç†ä¸ç›¸ä¸Šä¸‹ï¼ŒåŒæ—¶åˆé¿å…äº†å¼‚å¸¸å¤„ç†çš„è¯¸å¤šé—®é¢˜ã€‚</p>
</blockquote>
<details id="admonition--æ“ä½œç¬¦å†…éƒ¨è¢«å±•å¼€æˆç±»ä¼¼è¿™æ ·çš„ä»£ç " class="admonition info">
<summary class="admonition-title">
<p>? æ“ä½œç¬¦å†…éƒ¨è¢«å±•å¼€æˆç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p>
<p><a class="admonition-anchor-link" href="#admonition--æ“ä½œç¬¦å†…éƒ¨è¢«å±•å¼€æˆç±»ä¼¼è¿™æ ·çš„ä»£ç "></a></p>
</summary>
<div>
<pre><pre class="playground"><code class="language-rust  editable">
match result {
  Ok(v) =&gt; v,
  Err(e) =&gt; return Err(e.into())
}
</code></pre></pre>
<blockquote>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°å†™å‡ºç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼Œç®€æ´æ˜“æ‡‚ï¼Œå¯è¯»æ€§å¾ˆå¼ºï¼š</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">
fut
  .await?
  .process()?
  .next()
  .await?;
</code></pre></pre>
<p>æ•´ä¸ªä»£ç çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/18%EF%BD%9C%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88Rust%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%8E%E4%BC%97%E4%B8%8D%E5%90%8C%EF%BC%9F-4895239.jpg" alt="18ï½œé”™è¯¯å¤„ç†ï¼šä¸ºä»€ä¹ˆRustçš„é”™è¯¯å¤„ç†ä¸ä¼—ä¸åŒï¼Ÿ" /></p>
</div>
</details>
<p>è™½ç„¶ ? æ“ä½œç¬¦ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä½†ä½ è¦æ³¨æ„åœ¨ä¸åŒçš„é”™è¯¯ç±»å‹ä¹‹é—´æ˜¯æ— æ³•ç›´æ¥ä½¿ç”¨çš„ï¼Œéœ€è¦å®ç° From trait åœ¨äºŒè€…ä¹‹é—´å»ºç«‹èµ·è½¬æ¢çš„æ¡¥æ¢ï¼Œè¿™ä¼šå¸¦æ¥é¢å¤–çš„éº»çƒ¦ã€‚</p>
<h3 id="42-å‡½æ•°å¼é”™è¯¯å¤„ç†-mapmap_errand_then"><a class="header" href="#42-å‡½æ•°å¼é”™è¯¯å¤„ç†-mapmap_errand_then">4.2 å‡½æ•°å¼é”™è¯¯å¤„ç†: map/map_err/and_then</a></h3>
<blockquote>
<p>Rust è¿˜ä¸º Option å’Œ Result æä¾›äº†å¤§é‡çš„è¾…åŠ©å‡½æ•°ï¼Œå¦‚ map / map_err / and_thenï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¤„ç†æ•°æ®ç»“æ„ä¸­éƒ¨åˆ†æƒ…å†µã€‚</p>
</blockquote>
<details id="admonition-map--map_err--and_then-ä½¿ç”¨å‡½æ•°å¼é”™è¯¯å¤„ç†" class="admonition info">
<summary class="admonition-title">
<p>map / map_err / and_then: ä½¿ç”¨å‡½æ•°å¼é”™è¯¯å¤„ç†</p>
<p><a class="admonition-anchor-link" href="#admonition-map--map_err--and_then-ä½¿ç”¨å‡½æ•°å¼é”™è¯¯å¤„ç†"></a></p>
</summary>
<div>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/18%EF%BD%9C%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88Rust%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%8E%E4%BC%97%E4%B8%8D%E5%90%8C%EF%BC%9F.jpg" alt="18ï½œé”™è¯¯å¤„ç†ï¼šä¸ºä»€ä¹ˆRustçš„é”™è¯¯å¤„ç†ä¸ä¼—ä¸åŒï¼Ÿ" /></p>
<p>é€šè¿‡è¿™äº›å‡½æ•°ï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹é”™è¯¯å¤„ç†å¼•å…¥ <a href="https://www.slideshare.net/ScottWlaschin/railway-oriented-programming">Railroad oriented programming èŒƒå¼</a>ã€‚</p>
<blockquote>
<p>æ¯”å¦‚ç”¨æˆ·æ³¨å†Œçš„æµç¨‹ï¼Œä½ éœ€è¦æ ¡éªŒç”¨æˆ·è¾“å…¥ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè½¬æ¢ï¼Œç„¶åå­˜å…¥æ•°æ®åº“ä¸­ã€‚ä½ å¯ä»¥è¿™ä¹ˆæ’°å†™è¿™ä¸ªæµç¨‹ï¼š</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust  editable">Ok(data)
  .and_then(validate)
  .and_then(process)
  .map(transform)
  .and_then(store)
  .map_error(...)
</code></pre></pre>
<blockquote>
<p>æ‰§è¡Œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/KuanHsiaoKuo/writing_materials/main/imgs/image-20221004225336162.png" alt="image-20221004225336162" /></p>
</div>
</details>
<p>æ­¤å¤–ï¼ŒOption å’Œ Result çš„äº’ç›¸è½¬æ¢ä¹Ÿå¾ˆæ–¹æ¢ï¼Œè¿™ä¹Ÿå¾—ç›Šäº Rust æ„å»ºçš„å¼ºå¤§çš„å‡½æ•°å¼ç¼–ç¨‹çš„èƒ½åŠ›ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯é€šè¿‡ ? æ“ä½œç¬¦ï¼Œè¿˜æ˜¯å‡½æ•°å¼ç¼–ç¨‹è¿›è¡Œé”™è¯¯å¤„ç†ï¼ŒRust éƒ½åŠ›æ±‚è®©é”™è¯¯å¤„ç†çµæ´»é«˜æ•ˆï¼Œè®©å¼€å‘è€…ä½¿ç”¨èµ·æ¥ç®€å•ç›´è§‚ã€‚</p>
</blockquote>

            </main>

            <!--            <script src="https://utteranc.es/client.js"-->
            <!--                    repo="RustMagazine/rust_magazine_2022"-->
            <!--                    issue-term="title"-->
            <!--                    theme="github-light"-->
            <!--                    crossorigin="anonymous"-->
            <!--                    async></script>-->

            <nav class="nav-wrapper" aria-label="Page navigation">
                <!-- Mobile navigation buttons -->
                    <a rel="prev" href="3_3_1_error_content.html" class="mobile-nav-chapters previous"
                       title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="3_4_closure.html" class="mobile-nav-chapters next"
                       title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>

                <div style="clear: both"></div>
            </nav>
        </div>
    </div>

    <nav class="nav-wide-wrapper" aria-label="Page navigation">
            <a rel="prev" href="3_3_1_error_content.html" class="nav-chapters previous" title="Previous chapter"
               aria-label="Previous chapter" aria-keyshortcuts="Left">
                <i class="fa fa-angle-left"></i>
            </a>

            <a rel="next" href="3_4_closure.html" class="nav-chapters next" title="Next chapter"
               aria-label="Next chapter" aria-keyshortcuts="Right">
                <i class="fa fa-angle-right"></i>
            </a>
    </nav>

</div>



    <script type="text/javascript">
        window.playground_line_numbers = true;
    </script>

    <script type="text/javascript">
        window.playground_copyable = true;
    </script>

    <script src="ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="editor.js" type="text/javascript" charset="utf-8"></script>
    <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
    <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
    <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

    <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

<script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
<script src="highlight.js" type="text/javascript" charset="utf-8"></script>
<script src="book.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JS scripts -->
    <script type="text/javascript" src="assets/mermaid/mermaid.min.js"></script>
    <script type="text/javascript" src="assets/mermaid/mermaid-init.js"></script>
    <script type="text/javascript" src="assets/smart-anchor.js"></script>
    <script type="text/javascript" src="assets/pagetoc/sidebar.js"></script>

</body>
</html>
